<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 1 Data Structures | Data Structures and Dynamic Optimization with Matlab</title>
  <meta name="description" content="<p>The Mean and standard deviation of an AR(1) process.
Simulate and graph an AR(1) persistent process.</p>" />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 1 Data Structures | Data Structures and Dynamic Optimization with Matlab" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="<p>The Mean and standard deviation of an AR(1) process.
Simulate and graph an AR(1) persistent process.</p>" />
  <meta name="github-repo" content="fanwangecon/M4Econ" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 Data Structures | Data Structures and Dynamic Optimization with Matlab" />
  
  <meta name="twitter:description" content="<p>The Mean and standard deviation of an AR(1) process.
Simulate and graph an AR(1) persistent process.</p>" />
  

<meta name="author" content="Fan Wang" />


<meta name="date" content="2020-06-14" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="functions.html"/>
<script src="libs/header-attrs-2.2/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-92953468-6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-92953468-6');
</script>



<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Structures and Dynamic Optimization with Matlab</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="data-structures.html"><a href="data-structures.html"><i class="fa fa-check"></i><b>1</b> Data Structures</a>
<ul>
<li class="chapter" data-level="1.1" data-path="data-structures.html"><a href="data-structures.html#matrices-and-arrays"><i class="fa fa-check"></i><b>1.1</b> Matrices and Arrays</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="data-structures.html"><a href="data-structures.html#accumarray-examples"><i class="fa fa-check"></i><b>1.1.1</b> Accumarray Examples</a></li>
<li class="chapter" data-level="1.1.2" data-path="data-structures.html"><a href="data-structures.html#array-broadcast-and-expansion-examples"><i class="fa fa-check"></i><b>1.1.2</b> Array Broadcast and Expansion Examples</a></li>
<li class="chapter" data-level="1.1.3" data-path="data-structures.html"><a href="data-structures.html#array-draw-random-index-and-find-combinations-or-permuations"><i class="fa fa-check"></i><b>1.1.3</b> Array Draw Random Index and Find Combinations or Permuations</a></li>
<li class="chapter" data-level="1.1.4" data-path="data-structures.html"><a href="data-structures.html#check-imaginary-numbers"><i class="fa fa-check"></i><b>1.1.4</b> Check Imaginary Numbers</a></li>
<li class="chapter" data-level="1.1.5" data-path="data-structures.html"><a href="data-structures.html#array-reshape-repeat-and-expand-examples"><i class="fa fa-check"></i><b>1.1.5</b> Array Reshape, Repeat and Expand Examples</a></li>
<li class="chapter" data-level="1.1.6" data-path="data-structures.html"><a href="data-structures.html#array-index-slicing-and-subsetting-to-replace-and-expand"><i class="fa fa-check"></i><b>1.1.6</b> Array Index Slicing and Subsetting to Replace and Expand</a></li>
<li class="chapter" data-level="1.1.7" data-path="data-structures.html"><a href="data-structures.html#grid-states-choices-and-optimal-choices-example"><i class="fa fa-check"></i><b>1.1.7</b> Grid States, Choices and Optimal Choices Example</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="data-structures.html"><a href="data-structures.html#cells"><i class="fa fa-check"></i><b>1.2</b> Cells</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="data-structures.html"><a href="data-structures.html#list-comprehension-with-cells"><i class="fa fa-check"></i><b>1.2.1</b> List Comprehension with Cells</a></li>
<li class="chapter" data-level="1.2.2" data-path="data-structures.html"><a href="data-structures.html#all-possible-combinations-of-multiple-arrays"><i class="fa fa-check"></i><b>1.2.2</b> All Possible Combinations of Multiple Arrays</a></li>
<li class="chapter" data-level="1.2.3" data-path="data-structures.html"><a href="data-structures.html#combine-cells-together"><i class="fa fa-check"></i><b>1.2.3</b> Combine Cells Together</a></li>
<li class="chapter" data-level="1.2.4" data-path="data-structures.html"><a href="data-structures.html#nested-cells"><i class="fa fa-check"></i><b>1.2.4</b> Nested Cells</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="data-structures.html"><a href="data-structures.html#characters-and-strings"><i class="fa fa-check"></i><b>1.3</b> Characters and Strings</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="data-structures.html"><a href="data-structures.html#basic-string-operations"><i class="fa fa-check"></i><b>1.3.1</b> Basic String Operations</a></li>
<li class="chapter" data-level="1.3.2" data-path="data-structures.html"><a href="data-structures.html#string-manipulations-with-arrays"><i class="fa fa-check"></i><b>1.3.2</b> String Manipulations with Arrays</a></li>
<li class="chapter" data-level="1.3.3" data-path="data-structures.html"><a href="data-structures.html#concatenate-strings-arrays-with-numbers-and-number-arrays-with-strings"><i class="fa fa-check"></i><b>1.3.3</b> Concatenate Strings Arrays with Numbers and Number Arrays with Strings</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="data-structures.html"><a href="data-structures.html#map-containers"><i class="fa fa-check"></i><b>1.4</b> Map Containers</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="data-structures.html"><a href="data-structures.html#container-map-basics"><i class="fa fa-check"></i><b>1.4.1</b> Container Map Basics</a></li>
<li class="chapter" data-level="1.4.2" data-path="data-structures.html"><a href="data-structures.html#container-map-display-map-keys-and-values"><i class="fa fa-check"></i><b>1.4.2</b> Container Map Display Map Keys and Values</a></li>
<li class="chapter" data-level="1.4.3" data-path="data-structures.html"><a href="data-structures.html#genereate-container-maps"><i class="fa fa-check"></i><b>1.4.3</b> Genereate Container Maps</a></li>
<li class="chapter" data-level="1.4.4" data-path="data-structures.html"><a href="data-structures.html#container-map-example-overriding"><i class="fa fa-check"></i><b>1.4.4</b> Container Map Example Overriding</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>2</b> Functions</a>
<ul>
<li class="chapter" data-level="2.1" data-path="functions.html"><a href="functions.html#varargin-default-parameters"><i class="fa fa-check"></i><b>2.1</b> varargin Default Parameters</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="functions.html"><a href="functions.html#varargin-as-a-function-parameter"><i class="fa fa-check"></i><b>2.1.1</b> varargin as a Function Parameter</a></li>
<li class="chapter" data-level="2.1.2" data-path="functions.html"><a href="functions.html#map-based-default-parameter-structure-with-varargin"><i class="fa fa-check"></i><b>2.1.2</b> Map Based Default Parameter Structure with varargin</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="graphs.html"><a href="graphs.html"><i class="fa fa-check"></i><b>3</b> Graphs</a>
<ul>
<li class="chapter" data-level="3.1" data-path="graphs.html"><a href="graphs.html#figure-components"><i class="fa fa-check"></i><b>3.1</b> Figure Components</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="graphs.html"><a href="graphs.html#matlab-graph-safe-colors-for-web-presentation-and-publications-examples"><i class="fa fa-check"></i><b>3.1.1</b> Matlab Graph Safe Colors for Web, Presentation and Publications Examples</a></li>
<li class="chapter" data-level="3.1.2" data-path="graphs.html"><a href="graphs.html#matlab-graph-titling-labels-and-legends-examples"><i class="fa fa-check"></i><b>3.1.2</b> Matlab Graph Titling, Labels and Legends Examples</a></li>
<li class="chapter" data-level="3.1.3" data-path="graphs.html"><a href="graphs.html#matlab-graph-matrix-with-jet-spectrum-color-label-a-subset-examples"><i class="fa fa-check"></i><b>3.1.3</b> Matlab Graph Matrix with Jet Spectrum Color, Label a Subset Examples</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="graphs.html"><a href="graphs.html#basic-figure-types"><i class="fa fa-check"></i><b>3.2</b> Basic Figure Types</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="graphs.html"><a href="graphs.html#matlab-graph-scatter-plot-examples"><i class="fa fa-check"></i><b>3.2.1</b> Matlab Graph Scatter Plot Examples</a></li>
<li class="chapter" data-level="3.2.2" data-path="graphs.html"><a href="graphs.html#matlab-line-and-scatter-plot-with-multiple-lines-and-axis-lines"><i class="fa fa-check"></i><b>3.2.2</b> Matlab Line and Scatter Plot with Multiple Lines and Axis Lines</a></li>
<li class="chapter" data-level="3.2.3" data-path="graphs.html"><a href="graphs.html#matlab-graph-scatter-and-line-spectrum-with-three-variables"><i class="fa fa-check"></i><b>3.2.3</b> Matlab Graph Scatter and Line Spectrum with Three Variables</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="graphs.html"><a href="graphs.html#write-and-read-plots"><i class="fa fa-check"></i><b>3.3</b> Write and Read Plots</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="graphs.html"><a href="graphs.html#matlab-graph-generate-eps-postscript-figures-in-matlab"><i class="fa fa-check"></i><b>3.3.1</b> Matlab Graph Generate EPS postscript figures in matlab</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="tables.html"><a href="tables.html"><i class="fa fa-check"></i><b>4</b> Tables</a>
<ul>
<li class="chapter" data-level="4.1" data-path="tables.html"><a href="tables.html#basic-table-generation"><i class="fa fa-check"></i><b>4.1</b> Basic Table Generation</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="tables.html"><a href="tables.html#named-tables-with-random-data"><i class="fa fa-check"></i><b>4.1.1</b> Named Tables with Random Data</a></li>
<li class="chapter" data-level="4.1.2" data-path="tables.html"><a href="tables.html#tables-order-columns-and-sort"><i class="fa fa-check"></i><b>4.1.2</b> Tables Order Columns and Sort</a></li>
<li class="chapter" data-level="4.1.3" data-path="tables.html"><a href="tables.html#row-and-column-names-for-table-based-on-arrays"><i class="fa fa-check"></i><b>4.1.3</b> Row and Column names for Table based on Arrays</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="tables.html"><a href="tables.html#table-joining"><i class="fa fa-check"></i><b>4.2</b> Table Joining</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="tables.html"><a href="tables.html#combining-tables-and-matrixs-together"><i class="fa fa-check"></i><b>4.2.1</b> Combining Tables and Matrixs Together</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="panel.html"><a href="panel.html"><i class="fa fa-check"></i><b>5</b> Panel</a>
<ul>
<li class="chapter" data-level="5.1" data-path="panel.html"><a href="panel.html#time-series"><i class="fa fa-check"></i><b>5.1</b> Time Series</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="panel.html"><a href="panel.html#simulate-ar1-autoregressive-processes"><i class="fa fa-check"></i><b>5.1.1</b> Simulate AR(1) Autoregressive Processes</a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="index-and-code-links.html"><a href="index-and-code-links.html"><i class="fa fa-check"></i><b>A</b> Index and Code Links</a>
<ul>
<li class="chapter" data-level="A.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#data-structures-links"><i class="fa fa-check"></i><b>A.1</b> Data Structures links</a>
<ul>
<li class="chapter" data-level="A.1.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-1.1-matrices-and-arraysmatrices-and-arrays-links"><i class="fa fa-check"></i><b>A.1.1</b> <span>Section 1.1 Matrices and Arrays</span> links</a></li>
<li class="chapter" data-level="A.1.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-1.2-cellscells-links"><i class="fa fa-check"></i><b>A.1.2</b> <span>Section 1.2 Cells</span> links</a></li>
<li class="chapter" data-level="A.1.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-1.3-characters-and-stringscharacters-and-strings-links"><i class="fa fa-check"></i><b>A.1.3</b> <span>Section 1.3 Characters and Strings</span> links</a></li>
<li class="chapter" data-level="A.1.4" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-1.4-map-containersmap-containers-links"><i class="fa fa-check"></i><b>A.1.4</b> <span>Section 1.4 Map Containers</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#functions-links"><i class="fa fa-check"></i><b>A.2</b> Functions links</a>
<ul>
<li class="chapter" data-level="A.2.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-2.1-varargin-default-parametersvarargin-default-parameters-links"><i class="fa fa-check"></i><b>A.2.1</b> <span>Section 2.1 varargin Default Parameters</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#graphs-links"><i class="fa fa-check"></i><b>A.3</b> Graphs links</a>
<ul>
<li class="chapter" data-level="A.3.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-3.1-figure-componentsfigure-components-links"><i class="fa fa-check"></i><b>A.3.1</b> <span>Section 3.1 Figure Components</span> links</a></li>
<li class="chapter" data-level="A.3.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-3.2-basic-figure-typesbasic-figure-types-links"><i class="fa fa-check"></i><b>A.3.2</b> <span>Section 3.2 Basic Figure Types</span> links</a></li>
<li class="chapter" data-level="A.3.3" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-3.3-write-and-read-plotswrite-and-read-plots-links"><i class="fa fa-check"></i><b>A.3.3</b> <span>Section 3.3 Write and Read Plots</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.4" data-path="index-and-code-links.html"><a href="index-and-code-links.html#tables-links"><i class="fa fa-check"></i><b>A.4</b> Tables links</a>
<ul>
<li class="chapter" data-level="A.4.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-4.1-basic-table-generationbasic-table-generation-links"><i class="fa fa-check"></i><b>A.4.1</b> <span>Section 4.1 Basic Table Generation</span> links</a></li>
<li class="chapter" data-level="A.4.2" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-4.2-table-joiningtable-joining-links"><i class="fa fa-check"></i><b>A.4.2</b> <span>Section 4.2 Table Joining</span> links</a></li>
</ul></li>
<li class="chapter" data-level="A.5" data-path="index-and-code-links.html"><a href="index-and-code-links.html#panel-links"><i class="fa fa-check"></i><b>A.5</b> Panel links</a>
<ul>
<li class="chapter" data-level="A.5.1" data-path="index-and-code-links.html"><a href="index-and-code-links.html#section-5.1-time-seriestime-series-links"><i class="fa fa-check"></i><b>A.5.1</b> <span>Section 5.1 Time Series</span> links</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://fanwangecon.github.io/M4Econ/bookdown/index.html" target="blank">M4Econ Bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Structures and Dynamic Optimization with Matlab</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-structures" class="section level1" number="1">
<h1><span class="header-section-number">Chapter 1</span> Data Structures</h1>

<div id="matrices-and-arrays" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Matrices and Arrays</h2>

<div id="accumarray-examples" class="section level3" number="1.1.1">
<h3><span class="header-section-number">1.1.1</span> Accumarray Examples</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/CodeDynaAsset/">CodeDynaAsset</a> Package, <a href="https://fanwangecon.github.io/M4Econ/">Matlab Code Examples</a> Repository (<a href="https://fanwangecon.github.io/M4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Math4Econ/">Math for Econ with Matlab</a> Repository (<a href="https://fanwangecon.github.io/Math4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="accumarry-basic-example" class="section level4" number="1.1.1.1">
<h4><span class="header-section-number">1.1.1.1</span> Accumarry Basic Example</h4>
<p>There are three unique values in ar_a, sum up the probabilities for
each of the unique states. This is equivalent to sorting a matrix with a
and prob, and computing sum for each.</p>
<pre><code>ar_a = [3,2,1,3]&#39;;
ar_prob = [0.1,0.2,0.31,0.39]&#39;;
ar_sumprob = accumarray(ar_a, ar_prob);
tb_summed_prob = table(sort(unique(ar_a)), ar_sumprob);
disp(tb_summed_prob);

    Var1    ar_sumprob
    ____    __________

     1         0.31   
     2          0.2   
     3         0.49   </code></pre>
</div>
<div id="accumarry-for-discrete-random-variable" class="section level4" number="1.1.1.2">
<h4><span class="header-section-number">1.1.1.2</span> Accumarry For Discrete Random Variable</h4>
<p>Upon solving a model, if we look for the mass at certain choices or
states, accumarray could help aggregate up probabilities</p>
<pre><code>a1 = [1,1,2,2]

a1 = 1x4    
     1     1     2     2

a2 = [3,2,1,3]

a2 = 1x4    
     3     2     1     3

a3 = [1,2,3,3]

a3 = 1x4    
     1     2     3     3


a = [a1;a2;a3]&#39;/2

a = 4x3    
    0.5000    1.5000    0.5000
    0.5000    1.0000    1.0000
    1.0000    0.5000    1.5000
    1.0000    1.5000    1.5000


prob_a = zeros(size(a)) + 1/12

prob_a = 4x3    
    0.0833    0.0833    0.0833
    0.0833    0.0833    0.0833
    0.0833    0.0833    0.0833
    0.0833    0.0833    0.0833

[ar_idx_full, ~, ar_idx_of_unique] = unique(a)

ar_idx_full = 3x1    
    0.5000
    1.0000
    1.5000

ar_idx_of_unique = 12x1    
     1
     1
     2
     2
     3
     2
     1
     3
     1
     2

mt_idx_of_unique = reshape(ar_idx_of_unique, size(a))

mt_idx_of_unique = 4x3    
     1     3     1
     1     2     2
     2     1     3
     2     3     3


accumarray(mt_idx_of_unique(:,1), prob_a(:,1))

ans = 2x1    
    0.1667
    0.1667

accumarray(mt_idx_of_unique(:,2), prob_a(:,2))

ans = 3x1    
    0.0833
    0.0833
    0.1667

accumarray(mt_idx_of_unique(:,3), prob_a(:,3))

ans = 3x1    
    0.0833
    0.0833
    0.1667</code></pre>

</div>
</div>
<div id="array-broadcast-and-expansion-examples" class="section level3" number="1.1.2">
<h3><span class="header-section-number">1.1.2</span> Array Broadcast and Expansion Examples</h3>
<p><strong>back to</strong> <a href="https://fanwangecon.github.io"><strong>Fan</strong></a><strong>’s</strong> <a href="https://fanwangecon.github.io/M4Econ/"><strong>Reusable
Matlab</strong></a> <strong>Repository or</strong>
<a href="https://fanwangecon.github.io/CodeDynaAsset/"><strong>Dynamic Asset</strong></a>
<strong>Repository.</strong></p>
<p>Matrix broadcasting was added to matlab’s recent editions. This is an
important step for vectorizing codes. Proper usage of broadcasting
reduces memory allocation requirements for matrix matrix operations.</p>
<div id="broadcasting-with-a-row-and-a-column" class="section level4" number="1.1.2.1">
<h4><span class="header-section-number">1.1.2.1</span> Broadcasting with A Row and a Column</h4>
<p>Below we add together a 1 by 3 and 4 by 1 array, that should not work.
With broadcasting, it is assumed that we will mesh the arrays and then
sum up the meshed matrixes.</p>
<pre><code>clear all
ar_A = [1,2,3];
ar_B = [4,3,2,1]&#39;;
disp(size(ar_A));

     1     3

disp(size(ar_B));

     4     1

mt_A_B_broadcast = ar_A + ar_B;
disp(mt_A_B_broadcast);

     5     6     7
     4     5     6
     3     4     5
     2     3     4

mt_A_B_broadcast_product = ar_A.*ar_B;
disp(mt_A_B_broadcast_product);

     4     8    12
     3     6     9
     2     4     6
     1     2     3</code></pre>
</div>
<div id="broadcasting-with-one-row-and-one-matrix" class="section level4" number="1.1.2.2">
<h4><span class="header-section-number">1.1.2.2</span> Broadcasting with One Row and One Matrix</h4>
<p>Below we add together a 1 by 3 and 4 by 3 matrix, that should not work.
With broadcasting, it is assumed that we will repeat the array four
times, duplicating the single row four times, so the matrix dimensions
match up.</p>
<pre><code>clear all
ar_A = [1,2,3];
mt_B = [4,3,2,1;5,4,3,2;6,5,4,3]&#39;;
disp(size(ar_A));

     1     3

disp(size(mt_B));

     4     3

mt_A_B_broadcast = ar_A + mt_B;
disp(mt_A_B_broadcast);

     5     7     9
     4     6     8
     3     5     7
     2     4     6

mt_A_B_broadcast_product = ar_A.*mt_B;
disp(mt_A_B_broadcast_product);

     4    10    18
     3     8    15
     2     6    12
     1     4     9</code></pre>
</div>
<div id="broadcasting-with-one-column-and-one-matrix" class="section level4" number="1.1.2.3">
<h4><span class="header-section-number">1.1.2.3</span> Broadcasting with One Column and One Matrix</h4>
<p>Below we add together a 4 by 1 and 4 by 3 matrix, that should not work.
With broadcasting, it is assumed that we will repeat the column three
times, duplicating the single column three times, so the matrix
dimensions match up.</p>
<pre><code>clear all
ar_A = [4,3,2,1]&#39;;
mt_B = [4,3,2,1;5,4,3,2;6,5,4,3]&#39;;
disp(size(ar_A));

     4     1

disp(size(mt_B));

     4     3

mt_A_B_broadcast = ar_A + mt_B;
disp(mt_A_B_broadcast);

     8     9    10
     6     7     8
     4     5     6
     2     3     4

mt_A_B_broadcast_product = ar_A.*mt_B;
disp(mt_A_B_broadcast_product);

    16    20    24
     9    12    15
     4     6     8
     1     2     3</code></pre>
</div>
<div id="expand-with-broadcast-percentage-choice-grids" class="section level4" number="1.1.2.4">
<h4><span class="header-section-number">1.1.2.4</span> Expand with Broadcast, Percentage Choice grids</h4>
<pre><code>clear all
ar_w_perc = [0.1,0.5,0.9]

ar_w_perc = 1x3    
    0.1000    0.5000    0.9000

ar_w_level = [-2,0,2]

ar_w_level = 1x3    
    -2     0     2

fl_b_bd = -4

fl_b_bd = -4

ar_k_max = ar_w_level - fl_b_bd

ar_k_max = 1x3    
     2     4     6

ar_ak_perc = [0.1,0.3,0.7,0.9]

ar_ak_perc = 1x4    
    0.1000    0.3000    0.7000    0.9000

mt_k = (ar_k_max&#39;*ar_ak_perc)&#39;

mt_k = 4x3    
    0.2000    0.4000    0.6000
    0.6000    1.2000    1.8000
    1.4000    2.8000    4.2000
    1.8000    3.6000    5.4000

mt_a = (ar_w_level - mt_k)

mt_a = 4x3    
   -2.2000   -0.4000    1.4000
   -2.6000   -1.2000    0.2000
   -3.4000   -2.8000   -2.2000
   -3.8000   -3.6000   -3.4000</code></pre>
</div>
<div id="expand-matrix-twice" class="section level4" number="1.1.2.5">
<h4><span class="header-section-number">1.1.2.5</span> Expand Matrix Twice</h4>
<pre><code>clear all
% Same as above
ar_w_level = [-2,-1,-0.1]

ar_w_level = 1x3    
   -2.0000   -1.0000   -0.1000

fl_b_bd = -4

fl_b_bd = -4

ar_k_max = ar_w_level - fl_b_bd

ar_k_max = 1x3    
    2.0000    3.0000    3.9000

ar_ak_perc = [0.001, 0.1,0.3,0.7,0.9, 0.999]

ar_ak_perc = 1x6    
    0.0010    0.1000    0.3000    0.7000    0.9000    0.9990

mt_k = (ar_k_max&#39;*ar_ak_perc)&#39;

mt_k = 6x3    
    0.0020    0.0030    0.0039
    0.2000    0.3000    0.3900
    0.6000    0.9000    1.1700
    1.4000    2.1000    2.7300
    1.8000    2.7000    3.5100
    1.9980    2.9970    3.8961

mt_a = (ar_w_level - mt_k)

mt_a = 6x3    
   -2.0020   -1.0030   -0.1039
   -2.2000   -1.3000   -0.4900
   -2.6000   -1.9000   -1.2700
   -3.4000   -3.1000   -2.8300
   -3.8000   -3.7000   -3.6100
   -3.9980   -3.9970   -3.9961


% fraction of borrowing for bridge loan
ar_coh_bridge_perc = [0, 0.5, 0.999];

% Expand matrix to include coh percentage dimension
mt_k = repmat(mt_k, [1, length(ar_coh_bridge_perc)])

mt_k = 6x9    
    0.0020    0.0030    0.0039    0.0020    0.0030    0.0039    0.0020    0.0030    0.0039
    0.2000    0.3000    0.3900    0.2000    0.3000    0.3900    0.2000    0.3000    0.3900
    0.6000    0.9000    1.1700    0.6000    0.9000    1.1700    0.6000    0.9000    1.1700
    1.4000    2.1000    2.7300    1.4000    2.1000    2.7300    1.4000    2.1000    2.7300
    1.8000    2.7000    3.5100    1.8000    2.7000    3.5100    1.8000    2.7000    3.5100
    1.9980    2.9970    3.8961    1.9980    2.9970    3.8961    1.9980    2.9970    3.8961

mt_a = repmat(mt_a, [1, length(ar_coh_bridge_perc)])

mt_a = 6x9    
   -2.0020   -1.0030   -0.1039   -2.0020   -1.0030   -0.1039   -2.0020   -1.0030   -0.1039
   -2.2000   -1.3000   -0.4900   -2.2000   -1.3000   -0.4900   -2.2000   -1.3000   -0.4900
   -2.6000   -1.9000   -1.2700   -2.6000   -1.9000   -1.2700   -2.6000   -1.9000   -1.2700
   -3.4000   -3.1000   -2.8300   -3.4000   -3.1000   -2.8300   -3.4000   -3.1000   -2.8300
   -3.8000   -3.7000   -3.6100   -3.8000   -3.7000   -3.6100   -3.8000   -3.7000   -3.6100
   -3.9980   -3.9970   -3.9961   -3.9980   -3.9970   -3.9961   -3.9980   -3.9970   -3.9961

mt_a = mt_a

mt_a = 6x9    
   -2.0020   -1.0030   -0.1039   -2.0020   -1.0030   -0.1039   -2.0020   -1.0030   -0.1039
   -2.2000   -1.3000   -0.4900   -2.2000   -1.3000   -0.4900   -2.2000   -1.3000   -0.4900
   -2.6000   -1.9000   -1.2700   -2.6000   -1.9000   -1.2700   -2.6000   -1.9000   -1.2700
   -3.4000   -3.1000   -2.8300   -3.4000   -3.1000   -2.8300   -3.4000   -3.1000   -2.8300
   -3.8000   -3.7000   -3.6100   -3.8000   -3.7000   -3.6100   -3.8000   -3.7000   -3.6100
   -3.9980   -3.9970   -3.9961   -3.9980   -3.9970   -3.9961   -3.9980   -3.9970   -3.9961


% bridge loan component of borrowing
ar_brdige_a = (ar_coh_bridge_perc&#39;*ar_w_level)&#39;

ar_brdige_a = 3x3    
         0   -1.0000   -1.9980
         0   -0.5000   -0.9990
         0   -0.0500   -0.0999

ar_brdige_a = ar_brdige_a(:)&#39;

ar_brdige_a = 1x9    
         0         0         0   -1.0000   -0.5000   -0.0500   -1.9980   -0.9990   -0.0999


% borrowing choices excluding bridge loan
mt_a_nobridge = mt_a - ar_brdige_a

mt_a_nobridge = 6x9    
   -2.0020   -1.0030   -0.1039   -1.0020   -0.5030   -0.0539   -0.0040   -0.0040   -0.0040
   -2.2000   -1.3000   -0.4900   -1.2000   -0.8000   -0.4400   -0.2020   -0.3010   -0.3901
   -2.6000   -1.9000   -1.2700   -1.6000   -1.4000   -1.2200   -0.6020   -0.9010   -1.1701
   -3.4000   -3.1000   -2.8300   -2.4000   -2.6000   -2.7800   -1.4020   -2.1010   -2.7301
   -3.8000   -3.7000   -3.6100   -2.8000   -3.2000   -3.5600   -1.8020   -2.7010   -3.5101
   -3.9980   -3.9970   -3.9961   -2.9980   -3.4970   -3.9461   -2.0000   -2.9980   -3.8962</code></pre>

</div>
</div>
<div id="array-draw-random-index-and-find-combinations-or-permuations" class="section level3" number="1.1.3">
<h3><span class="header-section-number">1.1.3</span> Array Draw Random Index and Find Combinations or Permuations</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/CodeDynaAsset/">CodeDynaAsset</a> Package, <a href="https://fanwangecon.github.io/M4Econ/">Matlab Code Examples</a> Repository (<a href="https://fanwangecon.github.io/M4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Math4Econ/">Math for Econ with Matlab</a> Repository (<a href="https://fanwangecon.github.io/Math4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="matlab-draw-random-with-and-without-replacement" class="section level4" number="1.1.3.1">
<h4><span class="header-section-number">1.1.3.1</span> <strong>Matlab Draw Random with and without Replacement</strong></h4>
<pre><code>%Generate a matrix named foo, with limited numbers
rng(1234);
foo = unique((round((randn(5,1)+1)*100)));
disp(foo);

     5
    78
   154
   219
   232


% draw 10 random samples without replacement
index = randsample(1:length(foo), 4);
bar_rand_noreplace = foo(index,:);

% draw 1000 random samples with replacement
index = randsample(1:length(foo), 4, true);
bar_rand_replace = foo(index,:);

% Display
disp(table(bar_rand_noreplace, bar_rand_replace));

    bar_rand_noreplace    bar_rand_replace
    __________________    ________________

             5                   78       
            78                  154       
           154                  219       
           232                  219       </code></pre>
</div>
<div id="matrix-meshgrid-to-loop-permutated-vectors" class="section level4" number="1.1.3.2">
<h4><span class="header-section-number">1.1.3.2</span> Matrix Meshgrid to Loop Permutated Vectors</h4>
<p>Meshgrid to generate all permutations of arrays.</p>
<pre><code>k = linspace(1,10,10);
kp = linspace(1,10,10);
z = linspace(0,1,10);
 
[kM kpM zM] = meshgrid(k,kp,z);
kMVec = kM(:);
kMpVec = kpM(:);
zMVec = zM(:);
 
outputVec = zeros(size(zMVec));
for a=1:length(zMVec)
     outputVec(a) = kMVec(a)+kMpVec(a)+zMVec(a);
end
 
outputTens = reshape(outputVec,size(kM));
disp(outputTens);

(:,:,1) =

     2     3     4     5     6     7     8     9    10    11
     3     4     5     6     7     8     9    10    11    12
     4     5     6     7     8     9    10    11    12    13
     5     6     7     8     9    10    11    12    13    14
     6     7     8     9    10    11    12    13    14    15
     7     8     9    10    11    12    13    14    15    16
     8     9    10    11    12    13    14    15    16    17
     9    10    11    12    13    14    15    16    17    18
    10    11    12    13    14    15    16    17    18    19
    11    12    13    14    15    16    17    18    19    20


(:,:,2) =

    2.1111    3.1111    4.1111    5.1111    6.1111    7.1111    8.1111    9.1111   10.1111   11.1111
    3.1111    4.1111    5.1111    6.1111    7.1111    8.1111    9.1111   10.1111   11.1111   12.1111
    4.1111    5.1111    6.1111    7.1111    8.1111    9.1111   10.1111   11.1111   12.1111   13.1111
    5.1111    6.1111    7.1111    8.1111    9.1111   10.1111   11.1111   12.1111   13.1111   14.1111
    6.1111    7.1111    8.1111    9.1111   10.1111   11.1111   12.1111   13.1111   14.1111   15.1111
    7.1111    8.1111    9.1111   10.1111   11.1111   12.1111   13.1111   14.1111   15.1111   16.1111
    8.1111    9.1111   10.1111   11.1111   12.1111   13.1111   14.1111   15.1111   16.1111   17.1111
    9.1111   10.1111   11.1111   12.1111   13.1111   14.1111   15.1111   16.1111   17.1111   18.1111
   10.1111   11.1111   12.1111   13.1111   14.1111   15.1111   16.1111   17.1111   18.1111   19.1111
   11.1111   12.1111   13.1111   14.1111   15.1111   16.1111   17.1111   18.1111   19.1111   20.1111


(:,:,3) =

    2.2222    3.2222    4.2222    5.2222    6.2222    7.2222    8.2222    9.2222   10.2222   11.2222
    3.2222    4.2222    5.2222    6.2222    7.2222    8.2222    9.2222   10.2222   11.2222   12.2222
    4.2222    5.2222    6.2222    7.2222    8.2222    9.2222   10.2222   11.2222   12.2222   13.2222
    5.2222    6.2222    7.2222    8.2222    9.2222   10.2222   11.2222   12.2222   13.2222   14.2222
    6.2222    7.2222    8.2222    9.2222   10.2222   11.2222   12.2222   13.2222   14.2222   15.2222
    7.2222    8.2222    9.2222   10.2222   11.2222   12.2222   13.2222   14.2222   15.2222   16.2222
    8.2222    9.2222   10.2222   11.2222   12.2222   13.2222   14.2222   15.2222   16.2222   17.2222
    9.2222   10.2222   11.2222   12.2222   13.2222   14.2222   15.2222   16.2222   17.2222   18.2222
   10.2222   11.2222   12.2222   13.2222   14.2222   15.2222   16.2222   17.2222   18.2222   19.2222
   11.2222   12.2222   13.2222   14.2222   15.2222   16.2222   17.2222   18.2222   19.2222   20.2222


(:,:,4) =

    2.3333    3.3333    4.3333    5.3333    6.3333    7.3333    8.3333    9.3333   10.3333   11.3333
    3.3333    4.3333    5.3333    6.3333    7.3333    8.3333    9.3333   10.3333   11.3333   12.3333
    4.3333    5.3333    6.3333    7.3333    8.3333    9.3333   10.3333   11.3333   12.3333   13.3333
    5.3333    6.3333    7.3333    8.3333    9.3333   10.3333   11.3333   12.3333   13.3333   14.3333
    6.3333    7.3333    8.3333    9.3333   10.3333   11.3333   12.3333   13.3333   14.3333   15.3333
    7.3333    8.3333    9.3333   10.3333   11.3333   12.3333   13.3333   14.3333   15.3333   16.3333
    8.3333    9.3333   10.3333   11.3333   12.3333   13.3333   14.3333   15.3333   16.3333   17.3333
    9.3333   10.3333   11.3333   12.3333   13.3333   14.3333   15.3333   16.3333   17.3333   18.3333
   10.3333   11.3333   12.3333   13.3333   14.3333   15.3333   16.3333   17.3333   18.3333   19.3333
   11.3333   12.3333   13.3333   14.3333   15.3333   16.3333   17.3333   18.3333   19.3333   20.3333


(:,:,5) =

    2.4444    3.4444    4.4444    5.4444    6.4444    7.4444    8.4444    9.4444   10.4444   11.4444
    3.4444    4.4444    5.4444    6.4444    7.4444    8.4444    9.4444   10.4444   11.4444   12.4444
    4.4444    5.4444    6.4444    7.4444    8.4444    9.4444   10.4444   11.4444   12.4444   13.4444
    5.4444    6.4444    7.4444    8.4444    9.4444   10.4444   11.4444   12.4444   13.4444   14.4444
    6.4444    7.4444    8.4444    9.4444   10.4444   11.4444   12.4444   13.4444   14.4444   15.4444
    7.4444    8.4444    9.4444   10.4444   11.4444   12.4444   13.4444   14.4444   15.4444   16.4444
    8.4444    9.4444   10.4444   11.4444   12.4444   13.4444   14.4444   15.4444   16.4444   17.4444
    9.4444   10.4444   11.4444   12.4444   13.4444   14.4444   15.4444   16.4444   17.4444   18.4444
   10.4444   11.4444   12.4444   13.4444   14.4444   15.4444   16.4444   17.4444   18.4444   19.4444
   11.4444   12.4444   13.4444   14.4444   15.4444   16.4444   17.4444   18.4444   19.4444   20.4444


(:,:,6) =

    2.5556    3.5556    4.5556    5.5556    6.5556    7.5556    8.5556    9.5556   10.5556   11.5556
    3.5556    4.5556    5.5556    6.5556    7.5556    8.5556    9.5556   10.5556   11.5556   12.5556
    4.5556    5.5556    6.5556    7.5556    8.5556    9.5556   10.5556   11.5556   12.5556   13.5556
    5.5556    6.5556    7.5556    8.5556    9.5556   10.5556   11.5556   12.5556   13.5556   14.5556
    6.5556    7.5556    8.5556    9.5556   10.5556   11.5556   12.5556   13.5556   14.5556   15.5556
    7.5556    8.5556    9.5556   10.5556   11.5556   12.5556   13.5556   14.5556   15.5556   16.5556
    8.5556    9.5556   10.5556   11.5556   12.5556   13.5556   14.5556   15.5556   16.5556   17.5556
    9.5556   10.5556   11.5556   12.5556   13.5556   14.5556   15.5556   16.5556   17.5556   18.5556
   10.5556   11.5556   12.5556   13.5556   14.5556   15.5556   16.5556   17.5556   18.5556   19.5556
   11.5556   12.5556   13.5556   14.5556   15.5556   16.5556   17.5556   18.5556   19.5556   20.5556


(:,:,7) =

    2.6667    3.6667    4.6667    5.6667    6.6667    7.6667    8.6667    9.6667   10.6667   11.6667
    3.6667    4.6667    5.6667    6.6667    7.6667    8.6667    9.6667   10.6667   11.6667   12.6667
    4.6667    5.6667    6.6667    7.6667    8.6667    9.6667   10.6667   11.6667   12.6667   13.6667
    5.6667    6.6667    7.6667    8.6667    9.6667   10.6667   11.6667   12.6667   13.6667   14.6667
    6.6667    7.6667    8.6667    9.6667   10.6667   11.6667   12.6667   13.6667   14.6667   15.6667
    7.6667    8.6667    9.6667   10.6667   11.6667   12.6667   13.6667   14.6667   15.6667   16.6667
    8.6667    9.6667   10.6667   11.6667   12.6667   13.6667   14.6667   15.6667   16.6667   17.6667
    9.6667   10.6667   11.6667   12.6667   13.6667   14.6667   15.6667   16.6667   17.6667   18.6667
   10.6667   11.6667   12.6667   13.6667   14.6667   15.6667   16.6667   17.6667   18.6667   19.6667
   11.6667   12.6667   13.6667   14.6667   15.6667   16.6667   17.6667   18.6667   19.6667   20.6667


(:,:,8) =

    2.7778    3.7778    4.7778    5.7778    6.7778    7.7778    8.7778    9.7778   10.7778   11.7778
    3.7778    4.7778    5.7778    6.7778    7.7778    8.7778    9.7778   10.7778   11.7778   12.7778
    4.7778    5.7778    6.7778    7.7778    8.7778    9.7778   10.7778   11.7778   12.7778   13.7778
    5.7778    6.7778    7.7778    8.7778    9.7778   10.7778   11.7778   12.7778   13.7778   14.7778
    6.7778    7.7778    8.7778    9.7778   10.7778   11.7778   12.7778   13.7778   14.7778   15.7778
    7.7778    8.7778    9.7778   10.7778   11.7778   12.7778   13.7778   14.7778   15.7778   16.7778
    8.7778    9.7778   10.7778   11.7778   12.7778   13.7778   14.7778   15.7778   16.7778   17.7778
    9.7778   10.7778   11.7778   12.7778   13.7778   14.7778   15.7778   16.7778   17.7778   18.7778
   10.7778   11.7778   12.7778   13.7778   14.7778   15.7778   16.7778   17.7778   18.7778   19.7778
   11.7778   12.7778   13.7778   14.7778   15.7778   16.7778   17.7778   18.7778   19.7778   20.7778


(:,:,9) =

    2.8889    3.8889    4.8889    5.8889    6.8889    7.8889    8.8889    9.8889   10.8889   11.8889
    3.8889    4.8889    5.8889    6.8889    7.8889    8.8889    9.8889   10.8889   11.8889   12.8889
    4.8889    5.8889    6.8889    7.8889    8.8889    9.8889   10.8889   11.8889   12.8889   13.8889
    5.8889    6.8889    7.8889    8.8889    9.8889   10.8889   11.8889   12.8889   13.8889   14.8889
    6.8889    7.8889    8.8889    9.8889   10.8889   11.8889   12.8889   13.8889   14.8889   15.8889
    7.8889    8.8889    9.8889   10.8889   11.8889   12.8889   13.8889   14.8889   15.8889   16.8889
    8.8889    9.8889   10.8889   11.8889   12.8889   13.8889   14.8889   15.8889   16.8889   17.8889
    9.8889   10.8889   11.8889   12.8889   13.8889   14.8889   15.8889   16.8889   17.8889   18.8889
   10.8889   11.8889   12.8889   13.8889   14.8889   15.8889   16.8889   17.8889   18.8889   19.8889
   11.8889   12.8889   13.8889   14.8889   15.8889   16.8889   17.8889   18.8889   19.8889   20.8889


(:,:,10) =

     3     4     5     6     7     8     9    10    11    12
     4     5     6     7     8     9    10    11    12    13
     5     6     7     8     9    10    11    12    13    14
     6     7     8     9    10    11    12    13    14    15
     7     8     9    10    11    12    13    14    15    16
     8     9    10    11    12    13    14    15    16    17
     9    10    11    12    13    14    15    16    17    18
    10    11    12    13    14    15    16    17    18    19
    11    12    13    14    15    16    17    18    19    20
    12    13    14    15    16    17    18    19    20    21</code></pre>
</div>
<div id="given-integer-arrays-all-possible-combinations" class="section level4" number="1.1.3.3">
<h4><span class="header-section-number">1.1.3.3</span> Given integer arrays, all possible combinations</h4>
<p>given any sizes arrays, N of them, create all possible combinations</p>
<pre><code>ar_it_a = 1:3;
ar_it_b = 1:2;
ar_it_c = 2:4;
ar_it_d = -1:-1:-2;
ar_it_e = 0.1;

cl_ar_all = {ar_it_a, ar_it_b, ar_it_c, ar_it_d, ar_it_e};
cl_mt_all = cl_ar_all;
[cl_mt_all{:}] = ndgrid(cl_ar_all{:});
mt_it_allcombo = cell2mat(cellfun(@(m) m(:), cl_mt_all, &#39;uni&#39;, 0));

disp(mt_it_allcombo)

    1.0000    1.0000    2.0000   -1.0000    0.1000
    2.0000    1.0000    2.0000   -1.0000    0.1000
    3.0000    1.0000    2.0000   -1.0000    0.1000
    1.0000    2.0000    2.0000   -1.0000    0.1000
    2.0000    2.0000    2.0000   -1.0000    0.1000
    3.0000    2.0000    2.0000   -1.0000    0.1000
    1.0000    1.0000    3.0000   -1.0000    0.1000
    2.0000    1.0000    3.0000   -1.0000    0.1000
    3.0000    1.0000    3.0000   -1.0000    0.1000
    1.0000    2.0000    3.0000   -1.0000    0.1000
    2.0000    2.0000    3.0000   -1.0000    0.1000
    3.0000    2.0000    3.0000   -1.0000    0.1000
    1.0000    1.0000    4.0000   -1.0000    0.1000
    2.0000    1.0000    4.0000   -1.0000    0.1000
    3.0000    1.0000    4.0000   -1.0000    0.1000
    1.0000    2.0000    4.0000   -1.0000    0.1000
    2.0000    2.0000    4.0000   -1.0000    0.1000
    3.0000    2.0000    4.0000   -1.0000    0.1000
    1.0000    1.0000    2.0000   -2.0000    0.1000
    2.0000    1.0000    2.0000   -2.0000    0.1000
    3.0000    1.0000    2.0000   -2.0000    0.1000
    1.0000    2.0000    2.0000   -2.0000    0.1000
    2.0000    2.0000    2.0000   -2.0000    0.1000
    3.0000    2.0000    2.0000   -2.0000    0.1000
    1.0000    1.0000    3.0000   -2.0000    0.1000
    2.0000    1.0000    3.0000   -2.0000    0.1000
    3.0000    1.0000    3.0000   -2.0000    0.1000
    1.0000    2.0000    3.0000   -2.0000    0.1000
    2.0000    2.0000    3.0000   -2.0000    0.1000
    3.0000    2.0000    3.0000   -2.0000    0.1000
    1.0000    1.0000    4.0000   -2.0000    0.1000
    2.0000    1.0000    4.0000   -2.0000    0.1000
    3.0000    1.0000    4.0000   -2.0000    0.1000
    1.0000    2.0000    4.0000   -2.0000    0.1000
    2.0000    2.0000    4.0000   -2.0000    0.1000
    3.0000    2.0000    4.0000   -2.0000    0.1000</code></pre>

</div>
</div>
<div id="check-imaginary-numbers" class="section level3" number="1.1.4">
<h3><span class="header-section-number">1.1.4</span> Check Imaginary Numbers</h3>
<p><strong>back to</strong> <a href="https://fanwangecon.github.io"><strong>Fan</strong></a><strong>’s</strong> <a href="https://fanwangecon.github.io/M4Econ/"><strong>Reusable
Matlab</strong></a> <strong>Repository or</strong>
<a href="https://fanwangecon.github.io/CodeDynaAsset/"><strong>Dynamic Asset</strong></a>
<strong>Repository.</strong></p>
<div id="basic-examples" class="section level4" number="1.1.4.1">
<h4><span class="header-section-number">1.1.4.1</span> Basic Examples</h4>
<pre><code>rng(123);

% Imaginary array
ar_img = rand([1,7]) + 1i*rand([1,7]);

% Regular Array
ar_real = rand([1,10]);

% Combine arrays
ar_full = [ar_real ar_img];
ar_full = ar_full(randperm(length(ar_full)));
disp(ar_full);

  Columns 1 through 7

   0.6344 + 0.0000i   0.1755 + 0.0000i   0.5316 + 0.0000i   0.2861 + 0.4809i   0.7380 + 0.0000i   0.1825 + 0.0000i   0.6965 + 0.6848i

  Columns 8 through 14

   0.2269 + 0.3921i   0.7245 + 0.0000i   0.8494 + 0.0000i   0.6110 + 0.0000i   0.4231 + 0.4386i   0.9808 + 0.0597i   0.5318 + 0.0000i

  Columns 15 through 17

   0.3980 + 0.0000i   0.5513 + 0.3432i   0.7195 + 0.7290i


% real index
disp(~imag(ar_full));

   1   1   1   0   1   1   0   0   1   1   1   0   0   1   1   0   0


% Get Real and not real Components
disp(ar_full(imag(ar_full) == 0));

    0.6344    0.1755    0.5316    0.7380    0.1825    0.7245    0.8494    0.6110    0.5318    0.3980

disp(ar_full(imag(ar_full) ~= 0));

   0.2861 + 0.4809i   0.6965 + 0.6848i   0.2269 + 0.3921i   0.4231 + 0.4386i   0.9808 + 0.0597i   0.5513 + 0.3432i   0.7195 + 0.7290i</code></pre>

</div>
</div>
<div id="array-reshape-repeat-and-expand-examples" class="section level3" number="1.1.5">
<h3><span class="header-section-number">1.1.5</span> Array Reshape, Repeat and Expand Examples</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/CodeDynaAsset/">CodeDynaAsset</a> Package, <a href="https://fanwangecon.github.io/M4Econ/">Matlab Code Examples</a> Repository (<a href="https://fanwangecon.github.io/M4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Math4Econ/">Math for Econ with Matlab</a> Repository (<a href="https://fanwangecon.github.io/Math4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="basic-examples-of-reshape" class="section level4" number="1.1.5.1">
<h4><span class="header-section-number">1.1.5.1</span> Basic Examples of Reshape</h4>
<pre><code>a = [1,2,3,4,5,6]&#39;;
b = reshape(a, [3,2])

b = 3x2    
     1     4
     2     5
     3     6

b(:)

ans = 6x1    
     1
     2
     3
     4
     5
     6

a = [1,2,3;4,5,6;7,8,9;10,11,12]&#39;

a = 3x4    
     1     4     7    10
     2     5     8    11
     3     6     9    12

b = reshape(a, [6,2])

b = 6x2    
     1     7
     2     8
     3     9
     4    10
     5    11
     6    12</code></pre>
</div>
<div id="stack-two-matrix-of-equal-column-count-together" class="section level4" number="1.1.5.2">
<h4><span class="header-section-number">1.1.5.2</span> <strong>Stack Two Matrix of Equal Column Count Together</strong></h4>
<pre><code>a = [1,2;3,4];
a_stacked = [a;a;a];
disp(a_stacked);

     1     2
     3     4
     1     2
     3     4
     1     2
     3     4</code></pre>
</div>
<div id="repeatduplicate-matrix-downwards" class="section level4" number="1.1.5.3">
<h4><span class="header-section-number">1.1.5.3</span> <strong>Repeat/Duplicate Matrix Downwards</strong></h4>
<p>There is a 2 by 3 matrix, to be repeated 4 times, downwards. This is
useful for replicating data matrix for say counterfactual purposes.</p>
<p>Below, we have two ways of repeating a matrix downwards. Copy as whole,
or copy row by row.</p>
<pre><code>row_count = 2;
col_count = 3;
repeat_mat_count = 2;

data_vec = 1:(row_count*col_count);
searchMatrix = reshape(data_vec,row_count,col_count);

% To repeat matrix downwards
rep_rows_idx = [1:row_count]&#39;*ones(1,repeat_mat_count);
rep_rows_idx = rep_rows_idx(:);

rep_cols_idx = [1:col_count];
rep_cols_idx = rep_cols_idx(:);

searchMatrixRep_stack = searchMatrix(rep_rows_idx, rep_cols_idx);

% To insert repeated rows following original rows
rep_rows_idx = ([1:row_count]&#39;*ones(1,repeat_mat_count))&#39;;
rep_rows_idx = rep_rows_idx(:);

searchMatrixRep_dup = searchMatrix(rep_rows_idx, rep_cols_idx);

disp(searchMatrix)

     1     3     5
     2     4     6

disp(searchMatrixRep_stack)

     1     3     5
     2     4     6
     1     3     5
     2     4     6

disp(searchMatrixRep_dup)

     1     3     5
     1     3     5
     2     4     6
     2     4     6</code></pre>
</div>
<div id="index-dimension-transform" class="section level4" number="1.1.5.4">
<h4><span class="header-section-number">1.1.5.4</span> Index Dimension Transform</h4>
<p>it_inner_fin = 5; it_outter_fin = 3;</p>
<p>it_inner_cur = it_outter_fin it_outter_cur = it_inner_fin</p>
<p>ar_it_cols_idx = 1:1:(it_inner_fin*it_outter_fin)
ar_it_cols_inner_dim = repmat(1:it_inner_cur, <span class="math display">\[it\_outter\_cur,
1\]</span>) ar_it_cols_inner_dim(:)’</p>
<p>mt_it_cols_idx = reshape(ar_it_cols_idx, <span class="math display">\[it\_inner\_cur,
it\_outter\_cur\]</span>)’ mt_it_cols_idx(:)’</p>
<pre><code>it_inner_fin = 5;
it_outter_fin = 3;

ar_it_cols_idx = 1:1:(it_inner_fin*it_outter_fin)

ar_it_cols_idx = 1x15    
     1     2     3     4     5     6     7     8     9    10    11    12    13    14    15

mt_it_cols_idx = reshape(ar_it_cols_idx, [it_outter_fin, it_inner_fin])&#39;

mt_it_cols_idx = 5x3    
     1     2     3
     4     5     6
     7     8     9
    10    11    12
    13    14    15

mt_it_cols_idx(:)&#39;

ans = 1x15    
     1     4     7    10    13     2     5     8    11    14     3     6     9    12    15</code></pre>

</div>
</div>
<div id="array-index-slicing-and-subsetting-to-replace-and-expand" class="section level3" number="1.1.6">
<h3><span class="header-section-number">1.1.6</span> Array Index Slicing and Subsetting to Replace and Expand</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/CodeDynaAsset/">CodeDynaAsset</a> Package, <a href="https://fanwangecon.github.io/M4Econ/">Matlab Code Examples</a> Repository (<a href="https://fanwangecon.github.io/M4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Math4Econ/">Math for Econ with Matlab</a> Repository (<a href="https://fanwangecon.github.io/Math4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="matlab-index-based-replacement-of-subset-of-matrix-values" class="section level4" number="1.1.6.1">
<h4><span class="header-section-number">1.1.6.1</span> Matlab Index based Replacement of Subset of Matrix Values</h4>
<pre><code>clear all;
close all;
rng(123);
randMatZ = rand(3,6)+1

randMatZ = 3x6    
    1.6965    1.5513    1.9808    1.3921    1.4386    1.7380
    1.2861    1.7195    1.6848    1.3432    1.0597    1.1825
    1.2269    1.4231    1.4809    1.7290    1.3980    1.1755

randMat = rand(3,6)-0.5

randMat = 3x6    
    0.0316    0.3494    0.2224   -0.2717   -0.4079   -0.0063
    0.0318    0.2245   -0.1770   -0.2063   -0.0663   -0.0742
    0.1344    0.1110   -0.1382    0.1310   -0.0691   -0.1877


output = max(-randMat,0)

output = 3x6    
         0         0         0    0.2717    0.4079    0.0063
         0         0    0.1770    0.2063    0.0663    0.0742
         0         0    0.1382         0    0.0691    0.1877

randMatZ(output==0) = 999

randMatZ = 3x6    
  999.0000  999.0000  999.0000    1.3921    1.4386    1.7380
  999.0000  999.0000    1.6848    1.3432    1.0597    1.1825
  999.0000  999.0000    1.4809  999.0000    1.3980    1.1755

min(randMatZ,[],2)

ans = 3x1    
    1.3921
    1.0597
    1.1755


randMatZ((max(-randMat,0))==0) = 999

randMatZ = 3x6    
  999.0000  999.0000  999.0000    1.3921    1.4386    1.7380
  999.0000  999.0000    1.6848    1.3432    1.0597    1.1825
  999.0000  999.0000    1.4809  999.0000    1.3980    1.1755

min(randMatZ,[],2)

ans = 3x1    
    1.3921
    1.0597
    1.1755</code></pre>
</div>
<div id="matlab-matrix-index-based-matrix-expansion-manual" class="section level4" number="1.1.6.2">
<h4><span class="header-section-number">1.1.6.2</span> Matlab Matrix Index Based Matrix Expansion (Manual)</h4>
<p>In the example below, we start with a 4 by 2 matrix, than we expand
specific rows and columns of the matrix. Specifically, we expand the
matrix such that the result matrix repeats the 1st, 2nd, 1st, 2nd, then
3rd, than 1st, 1st, and 1st rows. And repeats column 1, then 2nd, then
2nd, then 2nd, and finally the first column.</p>
<pre><code>% Original Matrix
Z = 2;
N = 2;
Q = 2;
base_mat = reshape(1:(Z*N*Q),Z*N,Q);
disp(base_mat);

     1     5
     2     6
     3     7
     4     8

% Expanded Matrix
base_expand = base_mat([1,2,1,2,3,1,1,1],[1,2,2,2,1]);
disp(base_expand);

     1     5     5     5     1
     2     6     6     6     2
     1     5     5     5     1
     2     6     6     6     2
     3     7     7     7     3
     1     5     5     5     1
     1     5     5     5     1
     1     5     5     5     1</code></pre>
</div>
<div id="duplicate-matrix-downwards-n-times-using-index" class="section level4" number="1.1.6.3">
<h4><span class="header-section-number">1.1.6.3</span> Duplicate Matrix Downwards N times Using Index</h4>
<p>The example here has the same idea, but we do the operations above in a
more automated way. This could be done using alternative methods.</p>
<pre><code>% Original Matrix
Z = 2;
N = 2;
Q = 2;
base_mat = reshape(1:(Z*N*Q),Z*N,Q);
disp(base_mat);

     1     5
     2     6
     3     7
     4     8

% Generate row Index many times automatically depending on how many times
% to replicate
vmat_repeat_count = 3;
vmat_reindex_rows_repeat = [1:(Z*N)]&#39;* ones(1,vmat_repeat_count);
vmat_reindex_rows_repeat = vmat_reindex_rows_repeat(:);
disp(vmat_reindex_rows_repeat&#39;);

     1     2     3     4     1     2     3     4     1     2     3     4

% Duplicate Matrix by the Rows specified above, and using the same number
% of columns.
mat_repdown = base_mat(vmat_reindex_rows_repeat(:), 1:Q);
disp(mat_repdown&#39;);

     1     2     3     4     1     2     3     4     1     2     3     4
     5     6     7     8     5     6     7     8     5     6     7     8</code></pre>
</div>
<div id="max-of-matrix-column-by-column-linear-to-2d-index" class="section level4" number="1.1.6.4">
<h4><span class="header-section-number">1.1.6.4</span> Max of Matrix column by Column Linear to 2d Index</h4>
<p>Finding max of matrix column by column, then obtain the linear index
associated with the max values.</p>
<pre><code>randMat = rand(5,3);
disp(randMat);

    0.4264    0.1156    0.4830
    0.8934    0.3173    0.9856
    0.9442    0.4148    0.5195
    0.5018    0.8663    0.6129
    0.6240    0.2505    0.1206

[maxVal maxIndex] = max(randMat);
linearIndex = sub2ind(size(randMat),maxIndex,(1:1:size(randMat,2)))

linearIndex = 1x3    
     3     9    12

randMat(linearIndex)

ans = 1x3    
    0.9442    0.8663    0.9856

t_pV = [1,2;3,4;5,6];
t_pV_Ind = [1,1;0,0;1,1];
[maxVal maxIndex] = max(t_pV(t_pV_Ind==1))

maxVal = 6
maxIndex = 4</code></pre>
</div>
<div id="given-array-of-size-m-select-n-somewhat-equi-distance-elements" class="section level4" number="1.1.6.5">
<h4><span class="header-section-number">1.1.6.5</span> Given Array of size M, Select N somewhat equi-distance elements</h4>
<pre><code>% Subset count
it_n = 5;

% Example 1, long array
ar_fl_a = 1:1.1:100;
ar_it_subset_idx = unique(round(((0:1:(it_n-1))/(it_n-1))*(length(ar_fl_a)-1)+1));
ar_fl_a_subset = ar_fl_a(ar_it_subset_idx);
disp(ar_fl_a_subset);

    1.0000   26.3000   50.5000   75.8000  100.0000


% Example 2, Short Array
ar_fl_a = 1:1.1:3;
ar_it_subset_idx = unique(round(((0:1:(it_n-1))/(it_n-1))*(length(ar_fl_a)-1)+1));
ar_fl_a_subset = ar_fl_a(ar_it_subset_idx);
disp(ar_fl_a_subset);

    1.0000    2.1000


% Write As function
f_subset = @(it_subset_n, it_ar_n) unique(round(((0:1:(it_subset_n-1))/(it_subset_n-1))*(it_ar_n-1)+1));

% Select 5 out of 10
disp(f_subset(5, 10));

     1     3     6     8    10


% Select 10 out of 5
disp(f_subset(10, 5));

     1     2     3     4     5


% Select 5 out of 5
disp(f_subset(5, 5));

     1     2     3     4     5</code></pre>

</div>
</div>
<div id="grid-states-choices-and-optimal-choices-example" class="section level3" number="1.1.7">
<h3><span class="header-section-number">1.1.7</span> Grid States, Choices and Optimal Choices Example</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/CodeDynaAsset/">CodeDynaAsset</a> Package, <a href="https://fanwangecon.github.io/M4Econ/">Matlab Code Examples</a> Repository (<a href="https://fanwangecon.github.io/M4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Math4Econ/">Math for Econ with Matlab</a> Repository (<a href="https://fanwangecon.github.io/Math4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="generate-state-grid" class="section level4" number="1.1.7.1">
<h4><span class="header-section-number">1.1.7.1</span> <strong>Generate State Grid</strong></h4>
<p>There many multiple individuals, each individual’s value for each state
space variable is different. We duplicate that by shockCount and
choicecount:</p>
<pre><code>stateCount = 2;
shockCount = 3;
choiceCount = 4;

state1 = rand(1,stateCount)

state1 = 1x2    
    0.0571    0.6694

states1ShkDup = state1(ones(shockCount*choiceCount,1),:)

states1ShkDup = 12x2    
    0.0571    0.6694
    0.0571    0.6694
    0.0571    0.6694
    0.0571    0.6694
    0.0571    0.6694
    0.0571    0.6694
    0.0571    0.6694
    0.0571    0.6694
    0.0571    0.6694
    0.0571    0.6694

states1ShkDup(:)

ans = 24x1    
    0.0571
    0.0571
    0.0571
    0.0571
    0.0571
    0.0571
    0.0571
    0.0571
    0.0571
    0.0571</code></pre>
</div>
<div id="generate-choices" class="section level4" number="1.1.7.2">
<h4><span class="header-section-number">1.1.7.2</span> <strong>Generate Choices</strong></h4>
<p>Generate Choice Grid, Example: Each individual has minimal protein and
maximal protein they can get Generate a evenly set grid of choices for
each individual from min to max. Individual min and max choice is a
function of some component of their state-space, such as wealth/income
level, and choice is the quantity of good to purchase.</p>
<pre><code>stateCount = 2;
shockCount = 3;
choiceCount = 4;

% 1. Min and Max Choices for each state
minprot_n = floor(rand(1,stateCount)*10)

minprot_n = 1x2    
     7     7

maxprot_n = minprot_n + floor(rand(1,stateCount)*10)

maxprot_n = 1x2    
    14    12

% 2. Choice Ratios, ratios of max-min difference
protChoiceGrid = linspace(0,1,choiceCount)

protChoiceGrid = 1x4    
         0    0.3333    0.6667    1.0000

% 3. Each column is a different state.
searchMatrix = (protChoiceGrid&#39;*(maxprot_n-minprot_n)+minprot_n(ones(choiceCount,1),:))

searchMatrix = 4x2    
    7.0000    7.0000
    9.3333    8.6667
   11.6667   10.3333
   14.0000   12.0000

% 4. Each column is a different state, each set of rows is a different shock% for the state. In this structure, shocks (to preference for example), do% not change choice grid for a given state
searchMatrix = searchMatrix([1:choiceCount]&#39;* ones(1,shockCount), [1:stateCount]&#39; * ones(1,1))

searchMatrix = 12x2    
    7.0000    7.0000
    9.3333    8.6667
   11.6667   10.3333
   14.0000   12.0000
    7.0000    7.0000
    9.3333    8.6667
   11.6667   10.3333
   14.0000   12.0000
    7.0000    7.0000
    9.3333    8.6667

searchMatrix(:)

ans = 24x1    
    7.0000
    9.3333
   11.6667
   14.0000
    7.0000
    9.3333
   11.6667
   14.0000
    7.0000
    9.3333</code></pre>
</div>
<div id="average-utility-over-shocks" class="section level4" number="1.1.7.3">
<h4><span class="header-section-number">1.1.7.3</span> <strong>Average Utility over Shocks</strong></h4>
<p>Average of Shocks, E(value) For each STATE and CHOICE, x number of
shocks. Need to average over shocks; The raw value output is: STATES *
SHOCKS * CHOICES; Code below turn into various things, see MATLAB CODE
STRUCTURE in oneNOTE GCC working notes</p>
<pre><code>shockCount = 2;
choiceCount = 3;
stateCount = 4;

% 1. VALUE vector (STATES * SHOCKS * CHOICES by 1), this is generated by utility% evaluation function that takes as input STATES, SHOCKS, and CHOICES
valuesOri = sort(rand(choiceCount*shockCount*stateCount,1))

valuesOri = 24x1    
    0.0296
    0.1141
    0.1472
    0.1514
    0.1826
    0.1936
    0.2526
    0.2911
    0.3257
    0.3352

% 2. CHOICES by STATES * SHOCKS (ST1 SK1, ST1 SK2; ST2 SK1, etc), each% column are values for different choices given the same state and shock.
values = reshape(valuesOri,[choiceCount,shockCount*stateCount])

values = 3x8    
    0.0296    0.1514    0.2526    0.3352    0.5939    0.7065    0.8791    0.9204
    0.1141    0.1826    0.2911    0.3480    0.5992    0.7267    0.9001    0.9508
    0.1472    0.1936    0.3257    0.4578    0.6576    0.7792    0.9018    0.9658

% 3. SHOCKS by CHOICES * STATES (CH1 ST1, CH1 ST2; CH2 ST1, etc), each% column are two shocks for each state given the same choice. Note this% assumes that for different shocks of the same state choice vector is the% same.
values = reshape(values&#39;,[shockCount, choiceCount*stateCount])

values = 2x12    
    0.0296    0.2526    0.5939    0.8791    0.1141    0.2911    0.5992    0.9001    0.1472    0.3257    0.6576    0.9018
    0.1514    0.3352    0.7065    0.9204    0.1826    0.3480    0.7267    0.9508    0.1936    0.4578    0.7792    0.9658

% 4. AVG: 1 by CHOICES * STATES (CH1 ST1, CH1 ST2; CH2 ST1, etc), take% average over shocks for each state and choice combo
valuesMn = mean(values,1)

valuesMn = 1x12    
    0.0905    0.2939    0.6502    0.8997    0.1483    0.3196    0.6629    0.9254    0.1704    0.3918    0.7184    0.9338

% 5. AVG: CHOICES * STATES. From this matrix, one can now pick maximum% utility, and match that to the index on choice vector
valuesMn = reshape(valuesMn, [stateCount, choiceCount])&#39;

valuesMn = 3x4    
    0.0905    0.2939    0.6502    0.8997
    0.1483    0.3196    0.6629    0.9254
    0.1704    0.3918    0.7184    0.9338</code></pre>
</div>
<div id="pick-optimal-choice" class="section level4" number="1.1.7.4">
<h4><span class="header-section-number">1.1.7.4</span> <strong>Pick Optimal Choice</strong></h4>
<pre><code>choiceCount = 3;
stateCount = 4;

% 1. Matrix, each column is a state, each row is a choice
randMat = rand(choiceCount,stateCount)

randMat = 3x4    
    0.0733    0.5905    0.1731    0.1795
    0.0550    0.8539    0.1340    0.3175
    0.3232    0.2871    0.9947    0.5683

% 2. Maximum Value and Maximum Index
[maxVal maxIndex] = max(randMat)

maxVal = 1x4    
    0.3232    0.8539    0.9947    0.5683

maxIndex = 1x4    
     3     2     3     3

% 3. Linear index
linearIdx = maxIndex + ((1:stateCount)-1)*choiceCount

linearIdx = 1x4    
     3     5     9    12

% 4. Optimal Choices
randMat(linearIdx)

ans = 1x4    
    0.3232    0.8539    0.9947    0.5683</code></pre>

</div>
</div>
</div>
<div id="cells" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Cells</h2>

<div id="list-comprehension-with-cells" class="section level3" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> List Comprehension with Cells</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/CodeDynaAsset/">CodeDynaAsset</a> Package, <a href="https://fanwangecon.github.io/M4Econ/">Matlab Code Examples</a> Repository (<a href="https://fanwangecon.github.io/M4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Math4Econ/">Math for Econ with Matlab</a> Repository (<a href="https://fanwangecon.github.io/Math4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="find-index-of-elements-of-string-cells-in-a-larger-string-cells" class="section level4" number="1.2.1.1">
<h4><span class="header-section-number">1.2.1.1</span> Find Index of Elements of String Cells in a larger String Cells</h4>
<p>the function below returns the position of cl_st_param_keys in
ls_st_param_key should only include in cl_st_param_keys strings
that also exist in ls_st_param_key.</p>
<pre><code>ls_st_param_key = {&#39;fl_crra&#39;, &#39;fl_beta&#39;, ...
                   &#39;fl_w&#39;, &#39;fl_r_save&#39;, ...
                   &#39;fl_a_max&#39;, &#39;it_z_n&#39;, &#39;it_a_n&#39;};

cl_st_param_keys = {&#39;fl_w&#39;, &#39;fl_beta&#39;, &#39;it_z_n&#39;};

cell2mat(cellfun(@(m) find(strcmp(ls_st_param_key, m)), ...
                 cl_st_param_keys, &#39;UniformOutput&#39;, false))

ans = 1x3    
     3     2     6</code></pre>
</div>
<div id="given-container-of-arrays-find-total-length-of-all-arrays-for-selected-keys" class="section level4" number="1.2.1.2">
<h4><span class="header-section-number">1.2.1.2</span> Given Container of Arrays, Find Total Length of All Arrays for Selected Keys</h4>
<pre><code>cl_st_param_keys = {&#39;fl_crra&#39;, &#39;fl_beta&#39;};

param_tstar_map = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
it_simu_vec_len = 5;

param_tstar_map(&#39;fl_crra&#39;) = linspace(1, 2, 5);
param_tstar_map(&#39;fl_beta&#39;) = linspace(0.94, 0.98, 10);
param_tstar_map(&#39;w&#39;) = linspace(1.1, 1.4, it_simu_vec_len);
param_tstar_map(&#39;r&#39;) = linspace(0.01, 0.04, it_simu_vec_len);

ar_it_array_len = cell2mat(cellfun(@(m) length(param_tstar_map(m)), ...
                           cl_st_param_keys, &#39;UniformOutput&#39;, false));

it_total_length = sum(ar_it_array_len);
disp([&#39;ar_it_array_len: &#39; num2str(ar_it_array_len)])

ar_it_array_len: 5  10

disp([&#39;it_total_length: &#39; num2str(it_total_length)])

it_total_length: 15</code></pre>
</div>
<div id="given-container-of-arrays-find-min-and-max-of-each-and-draw-random-n-sets" class="section level4" number="1.2.1.3">
<h4><span class="header-section-number">1.2.1.3</span> Given Container of Arrays, Find Min and Max of Each and Draw Random N sets</h4>
<pre><code>cl_st_param_keys = {&#39;fl_crra&#39;, &#39;fl_beta&#39;};

param_tstar_map = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
it_simu_vec_len = 5;

param_tstar_map(&#39;fl_crra&#39;) = linspace(1, 2, 5);
param_tstar_map(&#39;fl_beta&#39;) = linspace(0.94, 0.98, 10);
param_tstar_map(&#39;w&#39;) = linspace(1.1, 1.4, it_simu_vec_len);
param_tstar_map(&#39;r&#39;) = linspace(0.01, 0.04, it_simu_vec_len);

rng(123);
it_simu_length = 20;
mt_param_rand = cell2mat(cellfun(@(m) ...
                           rand([it_simu_length,1]).*(max(param_tstar_map(m)) - min(param_tstar_map(m))) ...
                           + min(param_tstar_map(m)), ...
                           cl_st_param_keys, &#39;UniformOutput&#39;, false));

tb_rand_draws = array2table(mt_param_rand, &#39;VariableNames&#39;, cl_st_param_keys);

disp(tb_rand_draws);

    fl_crra    fl_beta
    _______    _______

    1.6965     0.96538
    1.2861     0.97398
    1.2269     0.96898
    1.5513     0.96444
    1.7195      0.9689
    1.4231     0.95292
    1.9808     0.95447
    1.6848     0.94913
    1.4809     0.95175
    1.3921     0.96524
    1.3432     0.94368
     1.729     0.95735
    1.4386     0.95723
    1.0597     0.95975
     1.398     0.95703
     1.738     0.95249
    1.1825     0.95705
    1.1755     0.97574
    1.5316     0.97777
    1.5318     0.96007</code></pre>

</div>
</div>
<div id="all-possible-combinations-of-multiple-arrays" class="section level3" number="1.2.2">
<h3><span class="header-section-number">1.2.2</span> All Possible Combinations of Multiple Arrays</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/CodeDynaAsset/">CodeDynaAsset</a> Package, <a href="https://fanwangecon.github.io/M4Econ/">Matlab Code Examples</a> Repository (<a href="https://fanwangecon.github.io/M4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Math4Econ/">Math for Econ with Matlab</a> Repository (<a href="https://fanwangecon.github.io/Math4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="given-several-arrays-of-possibly-different-length-in-container-all-possible-combinations" class="section level4" number="1.2.2.1">
<h4><span class="header-section-number">1.2.2.1</span> Given Several Arrays of Possibly different Length in Container, all Possible combinations</h4>
<pre><code>param_tstar_map = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
param_tstar_map(&#39;a&#39;) = linspace(1, 5, 5);
param_tstar_map(&#39;b&#39;) = linspace(0.87, 0.97, 6);
param_tstar_map(&#39;c&#39;) = linspace(0, 0.5, 10);

cl_st_param_keys = {&#39;a&#39;,&#39;c&#39;};
cl_ar_param_subset_values = values(param_tstar_map, {&#39;a&#39;,&#39;c&#39;});

cl_mt_all = cl_ar_param_subset_values;
[cl_mt_all{:}] = ndgrid(cl_ar_param_subset_values{:});
mt_param_vals_combi = cell2mat(cellfun(@(m) m(:), cl_mt_all, &#39;uni&#39;, 0));

tb_all_combi = array2table(mt_param_vals_combi, &#39;VariableNames&#39;, cl_st_param_keys);

disp(tb_all_combi);

    a       c    
    _    ________

    1           0
    2           0
    3           0
    4           0
    5           0
    1    0.055556
    2    0.055556
    3    0.055556
    4    0.055556
    5    0.055556
    1     0.11111
    2     0.11111
    3     0.11111
    4     0.11111
    5     0.11111
    1     0.16667
    2     0.16667
    3     0.16667
    4     0.16667
    5     0.16667
    1     0.22222
    2     0.22222
    3     0.22222
    4     0.22222
    5     0.22222
    1     0.27778
    2     0.27778
    3     0.27778
    4     0.27778
    5     0.27778
    1     0.33333
    2     0.33333
    3     0.33333
    4     0.33333
    5     0.33333
    1     0.38889
    2     0.38889
    3     0.38889
    4     0.38889
    5     0.38889
    1     0.44444
    2     0.44444
    3     0.44444
    4     0.44444
    5     0.44444
    1         0.5
    2         0.5
    3         0.5
    4         0.5
    5         0.5</code></pre>

</div>
</div>
<div id="combine-cells-together" class="section level3" number="1.2.3">
<h3><span class="header-section-number">1.2.3</span> Combine Cells Together</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/CodeDynaAsset/">CodeDynaAsset</a> Package, <a href="https://fanwangecon.github.io/M4Econ/">Matlab Code Examples</a> Repository (<a href="https://fanwangecon.github.io/M4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Math4Econ/">Math for Econ with Matlab</a> Repository (<a href="https://fanwangecon.github.io/Math4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="string-combine-with-string-cell" class="section level4" number="1.2.3.1">
<h4><span class="header-section-number">1.2.3.1</span> String Combine with string cell</h4>
<pre><code>ls_st_param_key = {&#39;fl_crra&#39;, &#39;fl_beta&#39;, ...
                   &#39;fl_w&#39;, &#39;fl_r_save&#39;, ...
                   &#39;fl_a_max&#39;, &#39;it_z_n&#39;, &#39;it_a_n&#39;};

cl_st_param_keys = {&#39;fl_wad&#39;, &#39;fl_betart&#39;, &#39;it_z_nfg&#39;};

st_param = &#39;asdjfl&#39;;

[{st_param}, ls_st_param_key, cl_st_param_keys]

ans = 
    {&#39;asdjfl&#39;}    {&#39;fl_crra&#39;}    {&#39;fl_beta&#39;}    {&#39;fl_w&#39;}    {&#39;fl_r_save&#39;}    {&#39;fl_a_max&#39;}    {&#39;it_z_n&#39;}    {&#39;it_a_n&#39;}    {&#39;fl_wad&#39;}    {&#39;fl_betart&#39;}    {&#39;it_z_nfg&#39;}</code></pre>

</div>
</div>
<div id="nested-cells" class="section level3" number="1.2.4">
<h3><span class="header-section-number">1.2.4</span> Nested Cells</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/CodeDynaAsset/">CodeDynaAsset</a> Package, <a href="https://fanwangecon.github.io/M4Econ/">Matlab Code Examples</a> Repository (<a href="https://fanwangecon.github.io/M4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Math4Econ/">Math for Econ with Matlab</a> Repository (<a href="https://fanwangecon.github.io/Math4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="nested-cells-and-access" class="section level4" number="1.2.4.1">
<h4><span class="header-section-number">1.2.4.1</span> Nested Cells and access</h4>
<pre><code>cl_st_param_keys = {&#39;fl_crra&#39;, &#39;fl_beta&#39;};

it_simu_vec_len = 3;
clns_parm_tstar = cell([4,1]);
clns_parm_tstar{1} = {&#39;fl_crra&#39;, &#39;CRRA&#39;, linspace(1, 2, it_simu_vec_len)};
clns_parm_tstar{2} = {&#39;fl_beta&#39;, &#39;Discount&#39;, linspace(0.94, 0.98, it_simu_vec_len)};
clns_parm_tstar{3} = {&#39;w&#39;, &#39;Wage&#39;, linspace(1.1, 1.4, it_simu_vec_len)};
clns_parm_tstar{4} = {&#39;r&#39;, &#39;Save Interest&#39;, linspace(0.01, 0.04, it_simu_vec_len)};

disp(clns_parm_tstar(1));

    {1x3 cell}

disp(clns_parm_tstar{1}{1})

fl_crra

disp(clns_parm_tstar{1}{2});

CRRA

disp(clns_parm_tstar{1}{3});

    1.0000    1.5000    2.0000</code></pre>

</div>
</div>
</div>
<div id="characters-and-strings" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> Characters and Strings</h2>

<div id="basic-string-operations" class="section level3" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> Basic String Operations</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/CodeDynaAsset/">CodeDynaAsset</a> Package, <a href="https://fanwangecon.github.io/M4Econ/">Matlab Code Examples</a> Repository (<a href="https://fanwangecon.github.io/M4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Math4Econ/">Math for Econ with Matlab</a> Repository (<a href="https://fanwangecon.github.io/Math4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="combine-char-with-numeric-value" class="section level4" number="1.3.1.1">
<h4><span class="header-section-number">1.3.1.1</span> Combine Char with Numeric Value</h4>
<p>Compose a string with words and numerical values</p>
<pre><code>st_title = strcat(&quot;Figure Title &quot;, ...
    &quot;(&quot;, ...
    &quot;threedeci=%.3f,&quot;, ...
    &quot;twodeci=%.2f,&quot;, ...
    &quot;int=%.0f&quot;, ...
    &quot;)&quot;);
ar_params = 123.4567 + zeros(1,3);
st_combo = compose(st_title, ar_params);
disp(st_combo);

Figure Title (threedeci=123.457,twodeci=123.46,int=123)</code></pre>
</div>
<div id="change-file-name-mlx-to-m" class="section level4" number="1.3.1.2">
<h4><span class="header-section-number">1.3.1.2</span> Change File Name MLX to M</h4>
<pre><code>st_file_name_mlx = &#39;continuous_differentiable.mlx&#39;;
at_st_split_file_name = split(st_file_name_mlx, &quot;.&quot;);
st_file_name_m = strcat(at_st_split_file_name{1}, &#39;_m.m&#39;);
disp(st_file_name_m);

continuous_differentiable_m.m</code></pre>

</div>
</div>
<div id="string-manipulations-with-arrays" class="section level3" number="1.3.2">
<h3><span class="header-section-number">1.3.2</span> String Manipulations with Arrays</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/CodeDynaAsset/">CodeDynaAsset</a> Package, <a href="https://fanwangecon.github.io/M4Econ/">Matlab Code Examples</a> Repository (<a href="https://fanwangecon.github.io/M4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Math4Econ/">Math for Econ with Matlab</a> Repository (<a href="https://fanwangecon.github.io/Math4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="string-array" class="section level4" number="1.3.2.1">
<h4><span class="header-section-number">1.3.2.1</span> String Array</h4>
<p>Three title lines, with double quotes:</p>
<pre><code>ar_st_titles = [&quot;Title1&quot;,&quot;Title2&quot;,&quot;Title3&quot;]&#39;;
disp(ar_st_titles);

    &quot;Title1&quot;
    &quot;Title2&quot;
    &quot;Title3&quot;</code></pre>
<p>Three words, joined together, now single quotes, this creates one
string, rather than a string array:</p>
<pre><code>st_titles = [&#39;Title1&#39;,&#39;Title2&#39;,&#39;Title3&#39;];
disp(st_titles);

Title1Title2Title3</code></pre>
</div>
<div id="string-cell-array" class="section level4" number="1.3.2.2">
<h4><span class="header-section-number">1.3.2.2</span> String Cell Array</h4>
<pre><code>ar_st_titles = {&#39;Title1&#39;,&#39;Title2&#39;,&#39;Title3&#39;};
disp(ar_st_titles);

    &#39;Title1&#39;    &#39;Title2&#39;    &#39;Title3&#39;</code></pre>
</div>
<div id="duplicate-string" class="section level4" number="1.3.2.3">
<h4><span class="header-section-number">1.3.2.3</span> Duplicate String</h4>
<pre><code>it_duplicate_n = 10;
disp(repmat({&#39;String&#39;}, [1, it_duplicate_n]));

    &#39;String&#39;    &#39;String&#39;    &#39;String&#39;    &#39;String&#39;    &#39;String&#39;    &#39;String&#39;    &#39;String&#39;    &#39;String&#39;    &#39;String&#39;    &#39;String&#39;</code></pre>
</div>
<div id="string-join-to-form-single-element" class="section level4" number="1.3.2.4">
<h4><span class="header-section-number">1.3.2.4</span> String Join to form Single Element</h4>
<p>using char() is safe</p>
<pre><code>st_var_name = &quot;abc&quot;

st_var_name = &quot;abc&quot;

st_var_name = [st_var_name &#39; percentile values&#39;]

st_var_name = 1x2 string array    
&quot;abc&quot;        &quot; percentile values&quot;    

strjoin(st_var_name)

ans = &quot;abc  percentile values&quot;


st_var_name = &quot;abc&quot;

st_var_name = &quot;abc&quot;

st_var_name = [char(st_var_name) &#39; percentile values&#39;]

st_var_name = &#39;abc percentile values&#39;


st_var_name = &#39;abc&#39;

st_var_name = &#39;abc&#39;

st_var_name = [char(st_var_name) &#39; percentile values&#39;]

st_var_name = &#39;abc percentile values&#39;</code></pre>
</div>
<div id="string-join-dash-paste" class="section level4" number="1.3.2.5">
<h4><span class="header-section-number">1.3.2.5</span> String Join dash (Paste)</h4>
<p>This is similar to R’s paste function:</p>
<pre><code>st_var_name = &quot;abc&quot;;

st_var_name = &quot;abc&quot;

st_var_name = [st_var_name, &#39;efg&#39;, &#39;mqo&#39;];

st_var_name = 1x3 string array    
&quot;abc&quot;        &quot;efg&quot;        &quot;mqo&quot;        

disp(strjoin(st_var_name, &quot;_&quot;));

ans = &quot;abc_efg_mqo&quot;

disp(strjoin(st_var_name, &quot;,&quot;));</code></pre>
</div>
<div id="numeric-array-to-string-without-space" class="section level4" number="1.3.2.6">
<h4><span class="header-section-number">1.3.2.6</span> Numeric Array to String without Space</h4>
<p>String replace</p>
<pre><code>ar_it_test_grp = [3, 8, 9];
strrep(num2str(ar_it_test_grp), &#39;  &#39;, &#39;_&#39;)

ans = &#39;3_8_9&#39;</code></pre>
</div>
<div id="substring-replace-in-cell-array" class="section level4" number="1.3.2.7">
<h4><span class="header-section-number">1.3.2.7</span> Substring replace in Cell Array</h4>
<pre><code>ar_st_cells = {&#39;shock=0.35&#39;,&#39;shock=0.40&#39;,&#39;shock=0.46&#39;};
ar_st_updated_cells = strrep(ar_st_cells, &#39;shock&#39;, &#39;$\epsilon$&#39;);
disp(ar_st_updated_cells);

    &#39;$\epsilon$=0.35&#39;    &#39;$\epsilon$=0.40&#39;    &#39;$\epsilon$=0.46&#39;</code></pre>
</div>
<div id="find-position-of-string-in-string-cell" class="section level4" number="1.3.2.8">
<h4><span class="header-section-number">1.3.2.8</span> Find position of String in String Cell</h4>
<pre><code>ls_st_param_key = {&#39;fl_crra&#39;, &#39;fl_beta&#39;, ...
                   &#39;fl_w&#39;, &#39;fl_r_save&#39;, ...
                   &#39;fl_a_max&#39;, &#39;it_z_n&#39;, &#39;it_a_n&#39;};
st_param_key = &#39;fl_a_max&#39;;
find(strcmp(ls_st_param_key, st_param_key))

ans = 5</code></pre>
</div>
<div id="find-the-positions-of-string-cells-in-full-string-cells" class="section level4" number="1.3.2.9">
<h4><span class="header-section-number">1.3.2.9</span> Find the positions of String Cells in Full String Cells</h4>
<pre><code>ls_st_param_key = {&#39;fl_crra&#39;, &#39;fl_beta&#39;, ...
                   &#39;fl_w&#39;, &#39;fl_r_save&#39;, ...
                   &#39;fl_a_max&#39;, &#39;it_z_n&#39;, &#39;it_a_n&#39;};

cl_st_param_keys = {&#39;fl_w&#39;, &#39;fl_beta&#39;, &#39;it_z_n&#39;};

cell2mat(cellfun(@(m) find(strcmp(ls_st_param_key, m)), ...
                 cl_st_param_keys, &#39;UniformOutput&#39;, false))

ans = 1x3    
     3     2     6


find(strcmp(ls_st_param_key, st_param_key))

ans = 5</code></pre>
</div>
<div id="cell-to-string-paste-and-replace-dash" class="section level4" number="1.3.2.10">
<h4><span class="header-section-number">1.3.2.10</span> Cell to string Paste and Replace dash</h4>
<pre><code>cl_st_param_keys = {&#39;fl_crra&#39;, &#39;fl_beta&#39;};
display(strrep(strjoin(cl_st_param_keys, &#39;-&#39;), &#39;_&#39;, &#39;\_&#39;));

fl\_crra-fl\_beta</code></pre>

</div>
</div>
<div id="concatenate-strings-arrays-with-numbers-and-number-arrays-with-strings" class="section level3" number="1.3.3">
<h3><span class="header-section-number">1.3.3</span> Concatenate Strings Arrays with Numbers and Number Arrays with Strings</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/CodeDynaAsset/">CodeDynaAsset</a> Package, <a href="https://fanwangecon.github.io/M4Econ/">Matlab Code Examples</a> Repository (<a href="https://fanwangecon.github.io/M4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Math4Econ/">Math for Econ with Matlab</a> Repository (<a href="https://fanwangecon.github.io/Math4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="combine-a-string-array-with-a-numeric-array-using-compose" class="section level4" number="1.3.3.1">
<h4><span class="header-section-number">1.3.3.1</span> Combine A String Array with A Numeric Array using Compose</h4>
<p>String array and numeric array, combine together using the compose
function, and test different formatting functions. Formating with
leading empty spaces, leading zeros, and convert to integer or not.</p>
<pre><code>st_titles = [&quot;%.3f&quot;,   &quot;%.1f&quot;,   &quot;%.0f&quot;;...
             &quot;%6.3f&quot;,  &quot;%6.1f&quot;,  &quot;%6.0f&quot;;...
             &quot;%06.3f&quot;, &quot;%06.1f&quot;, &quot;%06.0f&quot;];
ar_params = 123.4567890 + zeros(3,3);
st_combo = compose(st_titles, ar_params);
disp(st_combo);

    &quot;123.457&quot;    &quot;123.5&quot;     &quot;123&quot;   
    &quot;123.457&quot;    &quot; 123.5&quot;    &quot;   123&quot;
    &quot;123.457&quot;    &quot;0123.5&quot;    &quot;000123&quot;</code></pre>
</div>
<div id="title-from-an-array-of-values" class="section level4" number="1.3.3.2">
<h4><span class="header-section-number">1.3.3.2</span> Title from an Array of Values</h4>
<p>There is a vector of parameter values and a vector of names for these
parameter values, I want to include these in the title of a figure with
the same decimal formating.</p>
<pre><code>% Inputs
rng(123);
ar_params = rand(1,3);
ar_st_parms_names = [&quot;param1&quot;, &quot;param2&quot;, &quot;param3&quot;];
st_rounding = &#39;.2f&#39;;
st_title_main = &quot;this is the figure title&quot;;
% Rounding and combining
ar_st_params = strcat(ar_st_parms_names, compose(strcat(&quot;=%&quot;, st_rounding), ar_params));
% Generate a Single String that is comma separated:
st_param_pasted = strjoin(ar_st_params, &#39;, &#39;);
% Generate title with parameters
st_title_wth_params = strcat(st_title_main, &#39; (&#39;, st_param_pasted, &#39;)&#39;);
% Display:
disp(st_title_wth_params);

this is the figure title (param1=0.70, param2=0.29, param3=0.23)</code></pre>
</div>
<div id="combine-string-with-numeric-array" class="section level4" number="1.3.3.3">
<h4><span class="header-section-number">1.3.3.3</span> Combine String with Numeric Array</h4>
<p>Example 1:</p>
<pre><code>ar_fl_abc1 = [0.4 0.1 0.25 0.3 0.4];
disp([num2str(ar_fl_abc1&#39;, &#39;zw=%3.2f;&#39;), num2str(ar_fl_abc1&#39;, &#39;zr=%3.2f&#39;)]);</code></pre>
<p>Example 2:</p>
<pre><code>close all;

rng(123);
ar_z_r_borr_mesh_wage = rand([1,5]);
ar_z_wage_mesh_r_borr = rand([1,5]);
ar_it_rows = round(rand([1,5])*10);
cl_st_full_rowscols = cellstr([num2str(ar_z_r_borr_mesh_wage&#39;, &#39;zr=%3.2f;&#39;), ...
                               num2str(ar_z_wage_mesh_r_borr&#39;, &#39;zw=%3.2f&#39;)]);
cl_col_names = strcat(&#39;zi=&#39;, num2str(ar_it_rows([1,3,5])&#39;), &#39;:&#39;, cl_st_full_rowscols([1,3,5]));
disp(ar_z_r_borr_mesh_wage);

    0.6965    0.2861    0.2269    0.5513    0.7195

disp(ar_z_wage_mesh_r_borr);

    0.4231    0.9808    0.6848    0.4809    0.3921

disp(cl_st_full_rowscols);

    &#39;zr=0.70;zw=0.42&#39;
    &#39;zr=0.29;zw=0.98&#39;
    &#39;zr=0.23;zw=0.68&#39;
    &#39;zr=0.55;zw=0.48&#39;
    &#39;zr=0.72;zw=0.39&#39;

disp(cl_col_names);

    &#39;zi=3:zr=0.70;zw=0.42&#39;
    &#39;zi=4:zr=0.23;zw=0.68&#39;
    &#39;zi=4:zr=0.72;zw=0.39&#39;</code></pre>
</div>
<div id="combine-number-with-string-cell-array" class="section level4" number="1.3.3.4">
<h4><span class="header-section-number">1.3.3.4</span> Combine Number with String Cell Array</h4>
<p>We have a string cell array we created from the previous section, now
append numbers to it</p>
<pre><code>% Append Common Numbers
cl_col_names_append = strcat(cl_col_names, &#39;-String-Cell-With-Numeric-&#39;, num2str(123));
disp(cl_col_names_append);

    &#39;zi=3:zr=0.70;zw=0.42-String-Cell-With-Numeric-123&#39;
    &#39;zi=4:zr=0.23;zw=0.68-String-Cell-With-Numeric-123&#39;
    &#39;zi=4:zr=0.72;zw=0.39-String-Cell-With-Numeric-123&#39;</code></pre>
</div>
<div id="combine-numeric-array-with-string-cell-array" class="section level4" number="1.3.3.5">
<h4><span class="header-section-number">1.3.3.5</span> Combine Numeric Array with String Cell Array</h4>
<p>Append an array of numeric values</p>
<pre><code>% Append Common Numbers
cl_col_names_append = strcat(cl_col_names, &#39;-String-Cell-With-Numeric-Array-&#39;, ...
    num2str(transpose(1:length(cl_col_names))));
disp(cl_col_names_append);

    &#39;zi=3:zr=0.70;zw=0.42-String-Cell-With-Numeric-Array-1&#39;
    &#39;zi=4:zr=0.23;zw=0.68-String-Cell-With-Numeric-Array-2&#39;
    &#39;zi=4:zr=0.72;zw=0.39-String-Cell-With-Numeric-Array-3&#39;</code></pre>
</div>
<div id="convert-numeric-array-to-string-apeend-prefix-to-all-elements." class="section level4" number="1.3.3.6">
<h4><span class="header-section-number">1.3.3.6</span> Convert Numeric Array to String, Apeend Prefix to all elements.</h4>
<pre><code>ar_fl_abc1 = [0.4 0.1 0.25 0.3 0.4];
ar_st_wth_prefix = strcat(&#39;row=&#39;, string(ar_fl_abc1));
disp(ar_st_wth_prefix);

% Does Array Exist in Longer Array as Subset
ar_abc1 = [0.4 0.1 0.25 0.3 0.4];
ar_abc2 = [0.4 0.1 0.2 0.3 0.4];
ar_efg = [0.1 0.2 0.3 0.4 0.1 0.2 0.3 0.4 0.1 0.2 0.3 0.4 0.1 0.2 0.3 0.4];
st_abc1 = strjoin(string(num2str(ar_abc1)));
st_abc2 = strjoin(string(num2str(ar_abc2)));
st_efg = strjoin(string(num2str(ar_efg)));
contains(st_efg, st_abc1)
contains(st_efg, st_abc2)

% Display Convert to String
fprintf(&#39;Display string [%s]&#39;, num2str([1,2,3]));
fprintf(&#39;Display string [%s]&#39;, num2str(1.1));
fprintf(&#39;Display string [%s]&#39;, &#39;abc&#39;);</code></pre>

</div>
</div>
</div>
<div id="map-containers" class="section level2" number="1.4">
<h2><span class="header-section-number">1.4</span> Map Containers</h2>

<div id="container-map-basics" class="section level3" number="1.4.1">
<h3><span class="header-section-number">1.4.1</span> Container Map Basics</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/CodeDynaAsset/">CodeDynaAsset</a> Package, <a href="https://fanwangecon.github.io/M4Econ/">Matlab Code Examples</a> Repository (<a href="https://fanwangecon.github.io/M4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Math4Econ/">Math for Econ with Matlab</a> Repository (<a href="https://fanwangecon.github.io/Math4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="if-key-is-in-container" class="section level4" number="1.4.1.1">
<h4><span class="header-section-number">1.4.1.1</span> If key is in container</h4>
<pre><code>param_map_a = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
param_map_a(&#39;fl_b_bd&#39;) = -3;
param_map_a(&#39;fl_w_max&#39;) = 50;
param_map_a(&#39;fl_kp_min&#39;) = 0;
param_map_a(&#39;it_w_i&#39;) = 100;

disp(isKey(param_map_a, &#39;it_w_i&#39;));

   1

disp(isKey(param_map_a, &#39;it_w_i1&#39;));

   0</code></pre>
</div>
<div id="container-key-loop" class="section level4" number="1.4.1.2">
<h4><span class="header-section-number">1.4.1.2</span> Container Key Loop</h4>
<p>Generate new container key within loop dynamically</p>
<pre><code>param_map_a = containers.Map(&#39;KeyType&#39;, &#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);

rng(123);
for st_cur = [&quot;abc&quot;, &quot;efg&quot;, &quot;qqq&quot;]

    if (strcmp(st_cur, &quot;abc&quot;))
       data = rand([1,1]);
    elseif (strcmp(st_cur, &quot;efg&quot;))
       data = 123.123;
    elseif (strcmp(st_cur, &quot;qqq&quot;))
       data = -123;
    end

    % common function
    fl_sh_0p1pc_j = data*2 + 1;
    fl_sh_5pc_j = data/2 - 1;

    % generate map keys
    st_key_sh_0p1pc_j = strjoin([st_cur, &#39;sh_0p1pc_j&#39;], &quot;_&quot;);
    st_key_sh_5pc_j = strjoin([st_cur, &#39;sh_5pc_j&#39;], &quot;_&quot;);

    % store
    param_map_a(st_key_sh_0p1pc_j) = fl_sh_0p1pc_j;
    param_map_a(st_key_sh_5pc_j) = fl_sh_5pc_j;

end

disp(param_map_a.keys);

    &#39;abc_sh_0p1pc_j&#39;    &#39;abc_sh_5pc_j&#39;    &#39;efg_sh_0p1pc_j&#39;    &#39;efg_sh_5pc_j&#39;    &#39;qqq_sh_0p1pc_j&#39;    &#39;qqq_sh_5pc_j&#39;

disp(param_map_a.values);

    [2.3929]    [-0.6518]    [247.2460]    [60.5615]    [-245]    [-62.5000]</code></pre>

</div>
</div>
<div id="container-map-display-map-keys-and-values" class="section level3" number="1.4.2">
<h3><span class="header-section-number">1.4.2</span> Container Map Display Map Keys and Values</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/CodeDynaAsset/">CodeDynaAsset</a> Package, <a href="https://fanwangecon.github.io/M4Econ/">Matlab Code Examples</a> Repository (<a href="https://fanwangecon.github.io/M4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Math4Econ/">Math for Econ with Matlab</a> Repository (<a href="https://fanwangecon.github.io/Math4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="print-keys-and-values" class="section level4" number="1.4.2.1">
<h4><span class="header-section-number">1.4.2.1</span> Print Keys and Values</h4>
<p>Define container</p>
<pre><code>% Define Container
param_map = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
param_map(&#39;share_unbanked_j&#39;) = 12;
param_map(&#39;equi_r_j&#39;) = 2;
param_map(&#39;equi_w_j&#39;) = &#39;abc&#39;;
param_map(&#39;equi_P_j&#39;) = 1.2;</code></pre>
<p>Print</p>
<pre><code>param_map_keys = keys(param_map);
param_map_vals = values(param_map);
for i = 1:length(param_map)
    st_display = strjoin([&#39;pos =&#39; num2str(i) &#39;; key =&#39; string(param_map_keys{i}) &#39;; val =&#39; string(param_map_vals{i})]);
    disp(st_display);
end

pos = 1 ; key = equi_P_j ; val = 1.2
pos = 2 ; key = equi_r_j ; val = 2
pos = 3 ; key = equi_w_j ; val = abc
pos = 4 ; key = share_unbanked_j ; val = 12</code></pre>

</div>
</div>
<div id="genereate-container-maps" class="section level3" number="1.4.3">
<h3><span class="header-section-number">1.4.3</span> Genereate Container Maps</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/CodeDynaAsset/">CodeDynaAsset</a> Package, <a href="https://fanwangecon.github.io/M4Econ/">Matlab Code Examples</a> Repository (<a href="https://fanwangecon.github.io/M4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Math4Econ/">Math for Econ with Matlab</a> Repository (<a href="https://fanwangecon.github.io/Math4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="generate-a-container-map-with-any-time-of-data" class="section level4" number="1.4.3.1">
<h4><span class="header-section-number">1.4.3.1</span> Generate a Container map with any time of data</h4>
<p>Create a container map with float, int, string, and matrix</p>
<pre><code>close all;
clear all;

% Create A Map with String Keys and any values
param_map = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
param_map(&#39;share_unbanked_j&#39;) = 12;
param_map(&#39;equi_r_j&#39;) = 2;
param_map(&#39;equi_w_j&#39;) = &#39;abc&#39;;
param_map(&#39;equi_P_j&#39;) = zeros(2,3);
param_map.keys

ans = 
    {&#39;equi_P_j&#39;}    {&#39;equi_r_j&#39;}    {&#39;equi_w_j&#39;}    {&#39;share_unbanked_j&#39;}

param_map.values

ans = 
    {2x3 double}    {[2]}    {&#39;abc&#39;}    {[12]}</code></pre>
</div>
<div id="access-multiple-values-of-a-container-map" class="section level4" number="1.4.3.2">
<h4><span class="header-section-number">1.4.3.2</span> Access Multiple Values of a container map</h4>
<p>Values been accessed need to be of the same type</p>
<pre><code>% Parameter Dealing from Map
params_group = values(param_map, {&#39;share_unbanked_j&#39;, &#39;equi_r_j&#39;});
[equi_P_j, equi_r_j] = params_group{:}

equi_P_j = 12
equi_r_j = 2


% Access Scalar Elements of Map and Convert the Array
cell2mat(values(param_map, {&#39;share_unbanked_j&#39;, &#39;equi_r_j&#39;}))

ans = 1x2    
    12     2</code></pre>

</div>
</div>
<div id="container-map-example-overriding" class="section level3" number="1.4.4">
<h3><span class="header-section-number">1.4.4</span> Container Map Example Overriding</h3>
<blockquote>
<p>Go back to <a href="http://fanwangecon.github.io/">fan</a>’s <a href="https://fanwangecon.github.io/CodeDynaAsset/">CodeDynaAsset</a> Package, <a href="https://fanwangecon.github.io/M4Econ/">Matlab Code Examples</a> Repository (<a href="https://fanwangecon.github.io/M4Econ/bookdown">bookdown site</a>), or <a href="https://fanwangecon.github.io/Math4Econ/">Math for Econ with Matlab</a> Repository (<a href="https://fanwangecon.github.io/Math4Econ/bookdown">bookdown site</a>).</p>
</blockquote>
<div id="update-container-map" class="section level4" number="1.4.4.1">
<h4><span class="header-section-number">1.4.4.1</span> Update Container Map</h4>
<p>There is one map with values, Container Map A. There is another
container Map, Container Map B. Container Maps A and B share keys. For
keys that exist in B and A, B Key value supercede values for the same
keys in A. For new keys in B, they superced keys in A.</p>
<pre><code>param_map_a = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
param_map_a(&#39;fl_b_bd&#39;) = -3;
param_map_a(&#39;fl_w_max&#39;) = 50;
param_map_a(&#39;fl_kp_min&#39;) = 0;
param_map_a(&#39;it_w_i&#39;) = 100;

param_map_b = containers.Map(&#39;KeyType&#39;,&#39;char&#39;, &#39;ValueType&#39;,&#39;any&#39;);
param_map_b(&#39;fl_w_max&#39;) = 77;
param_map_b(&#39;fl_kp_min&#39;) = -231;
param_map_b(&#39;it_z_n&#39;) = 5;
param_map_b(&#39;fl_z_mu&#39;) = 0;

param_map_c = [param_map_a; param_map_b];
param_map_c.keys

ans = 
    {&#39;fl_b_bd&#39;}    {&#39;fl_kp_min&#39;}    {&#39;fl_w_max&#39;}    {&#39;fl_z_mu&#39;}    {&#39;it_w_i&#39;}    {&#39;it_z_n&#39;}

param_map_c.values

ans = 
    {[-3]}    {[-231]}    {[77]}    {[0]}    {[100]}    {[5]}</code></pre>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="functions.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["Data-Structures-and-Dynamic-Optimization-with-Matlab.pdf", "PDF"]],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
