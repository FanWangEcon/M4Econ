
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Matlab Array Broadcast and Expansion Examples</title><meta name="generator" content="MATLAB 9.6"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2019-09-04"><meta name="DC.source" content="fs_broadcast_expand.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>Matlab Array Broadcast and Expansion Examples</h1><!--introduction--><p><b>back to <a href="https://fanwangecon.github.io">Fan</a>'s <a href="https://fanwangecon.github.io/M4Econ/">Reusable Matlab</a> Repository or <a href="https://fanwangecon.github.io/CodeDynaAsset/">Dynamic Asset</a> Repository.</b></p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Expand with Broadcast, Percentage Choice grids</a></li><li><a href="#2">Expand Matrix Twice</a></li></ul></div><h2 id="1">Expand with Broadcast, Percentage Choice grids</h2><pre class="codeinput">clear <span class="string">all</span>
ar_w_perc = [0.1,0.5,0.9]
ar_w_level = [-2,0,2]
fl_b_bd = -4
ar_k_max = ar_w_level - fl_b_bd
ar_ak_perc = [0.1,0.3,0.7,0.9]
mt_k = (ar_k_max'*ar_ak_perc)'
mt_a = (ar_w_level - mt_k)
</pre><pre class="codeoutput">
ar_w_perc =

    0.1000    0.5000    0.9000


ar_w_level =

    -2     0     2


fl_b_bd =

    -4


ar_k_max =

     2     4     6


ar_ak_perc =

    0.1000    0.3000    0.7000    0.9000


mt_k =

    0.2000    0.4000    0.6000
    0.6000    1.2000    1.8000
    1.4000    2.8000    4.2000
    1.8000    3.6000    5.4000


mt_a =

   -2.2000   -0.4000    1.4000
   -2.6000   -1.2000    0.2000
   -3.4000   -2.8000   -2.2000
   -3.8000   -3.6000   -3.4000

</pre><h2 id="2">Expand Matrix Twice</h2><pre class="codeinput">clear <span class="string">all</span>
<span class="comment">% Same as above</span>
ar_w_level = [-2,-1,-0.1]
fl_b_bd = -4
ar_k_max = ar_w_level - fl_b_bd
ar_ak_perc = [0.001, 0.1,0.3,0.7,0.9, 0.999]
mt_k = (ar_k_max'*ar_ak_perc)'
mt_a = (ar_w_level - mt_k)

<span class="comment">% fraction of borrowing for bridge loan</span>
ar_coh_bridge_perc = [0, 0.5, 0.999];

<span class="comment">% Expand matrix to include coh percentage dimension</span>
mt_k = repmat(mt_k, [1, length(ar_coh_bridge_perc)])
mt_a = repmat(mt_a, [1, length(ar_coh_bridge_perc)])
mt_a = mt_a

<span class="comment">% bridge loan component of borrowing</span>
ar_brdige_a = (ar_coh_bridge_perc'*ar_w_level)'
ar_brdige_a = ar_brdige_a(:)'

<span class="comment">% borrowing choices excluding bridge loan</span>
mt_a_nobridge = mt_a - ar_brdige_a
</pre><pre class="codeoutput">
ar_w_level =

   -2.0000   -1.0000   -0.1000


fl_b_bd =

    -4


ar_k_max =

    2.0000    3.0000    3.9000


ar_ak_perc =

    0.0010    0.1000    0.3000    0.7000    0.9000    0.9990


mt_k =

    0.0020    0.0030    0.0039
    0.2000    0.3000    0.3900
    0.6000    0.9000    1.1700
    1.4000    2.1000    2.7300
    1.8000    2.7000    3.5100
    1.9980    2.9970    3.8961


mt_a =

   -2.0020   -1.0030   -0.1039
   -2.2000   -1.3000   -0.4900
   -2.6000   -1.9000   -1.2700
   -3.4000   -3.1000   -2.8300
   -3.8000   -3.7000   -3.6100
   -3.9980   -3.9970   -3.9961


mt_k =

  Columns 1 through 7

    0.0020    0.0030    0.0039    0.0020    0.0030    0.0039    0.0020
    0.2000    0.3000    0.3900    0.2000    0.3000    0.3900    0.2000
    0.6000    0.9000    1.1700    0.6000    0.9000    1.1700    0.6000
    1.4000    2.1000    2.7300    1.4000    2.1000    2.7300    1.4000
    1.8000    2.7000    3.5100    1.8000    2.7000    3.5100    1.8000
    1.9980    2.9970    3.8961    1.9980    2.9970    3.8961    1.9980

  Columns 8 through 9

    0.0030    0.0039
    0.3000    0.3900
    0.9000    1.1700
    2.1000    2.7300
    2.7000    3.5100
    2.9970    3.8961


mt_a =

  Columns 1 through 7

   -2.0020   -1.0030   -0.1039   -2.0020   -1.0030   -0.1039   -2.0020
   -2.2000   -1.3000   -0.4900   -2.2000   -1.3000   -0.4900   -2.2000
   -2.6000   -1.9000   -1.2700   -2.6000   -1.9000   -1.2700   -2.6000
   -3.4000   -3.1000   -2.8300   -3.4000   -3.1000   -2.8300   -3.4000
   -3.8000   -3.7000   -3.6100   -3.8000   -3.7000   -3.6100   -3.8000
   -3.9980   -3.9970   -3.9961   -3.9980   -3.9970   -3.9961   -3.9980

  Columns 8 through 9

   -1.0030   -0.1039
   -1.3000   -0.4900
   -1.9000   -1.2700
   -3.1000   -2.8300
   -3.7000   -3.6100
   -3.9970   -3.9961


mt_a =

  Columns 1 through 7

   -2.0020   -1.0030   -0.1039   -2.0020   -1.0030   -0.1039   -2.0020
   -2.2000   -1.3000   -0.4900   -2.2000   -1.3000   -0.4900   -2.2000
   -2.6000   -1.9000   -1.2700   -2.6000   -1.9000   -1.2700   -2.6000
   -3.4000   -3.1000   -2.8300   -3.4000   -3.1000   -2.8300   -3.4000
   -3.8000   -3.7000   -3.6100   -3.8000   -3.7000   -3.6100   -3.8000
   -3.9980   -3.9970   -3.9961   -3.9980   -3.9970   -3.9961   -3.9980

  Columns 8 through 9

   -1.0030   -0.1039
   -1.3000   -0.4900
   -1.9000   -1.2700
   -3.1000   -2.8300
   -3.7000   -3.6100
   -3.9970   -3.9961


ar_brdige_a =

         0   -1.0000   -1.9980
         0   -0.5000   -0.9990
         0   -0.0500   -0.0999


ar_brdige_a =

  Columns 1 through 7

         0         0         0   -1.0000   -0.5000   -0.0500   -1.9980

  Columns 8 through 9

   -0.9990   -0.0999


mt_a_nobridge =

  Columns 1 through 7

   -2.0020   -1.0030   -0.1039   -1.0020   -0.5030   -0.0539   -0.0040
   -2.2000   -1.3000   -0.4900   -1.2000   -0.8000   -0.4400   -0.2020
   -2.6000   -1.9000   -1.2700   -1.6000   -1.4000   -1.2200   -0.6020
   -3.4000   -3.1000   -2.8300   -2.4000   -2.6000   -2.7800   -1.4020
   -3.8000   -3.7000   -3.6100   -2.8000   -3.2000   -3.5600   -1.8020
   -3.9980   -3.9970   -3.9961   -2.9980   -3.4970   -3.9461   -2.0000

  Columns 8 through 9

   -0.0040   -0.0040
   -0.3010   -0.3901
   -0.9010   -1.1701
   -2.1010   -2.7301
   -2.7010   -3.5101
   -2.9980   -3.8962

</pre><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2019a</a><br></p></div><!--
##### SOURCE BEGIN #####
%% Matlab Array Broadcast and Expansion Examples
% *back to <https://fanwangecon.github.io Fan>'s
% <https://fanwangecon.github.io/M4Econ/ Reusable Matlab>
% Repository or <https://fanwangecon.github.io/CodeDynaAsset/ Dynamic Asset> Repository.*

%% Expand with Broadcast, Percentage Choice grids
clear all
ar_w_perc = [0.1,0.5,0.9]
ar_w_level = [-2,0,2]
fl_b_bd = -4
ar_k_max = ar_w_level - fl_b_bd
ar_ak_perc = [0.1,0.3,0.7,0.9]
mt_k = (ar_k_max'*ar_ak_perc)'
mt_a = (ar_w_level - mt_k)

%% Expand Matrix Twice

clear all
% Same as above
ar_w_level = [-2,-1,-0.1]
fl_b_bd = -4
ar_k_max = ar_w_level - fl_b_bd
ar_ak_perc = [0.001, 0.1,0.3,0.7,0.9, 0.999]
mt_k = (ar_k_max'*ar_ak_perc)'
mt_a = (ar_w_level - mt_k)

% fraction of borrowing for bridge loan
ar_coh_bridge_perc = [0, 0.5, 0.999];

% Expand matrix to include coh percentage dimension
mt_k = repmat(mt_k, [1, length(ar_coh_bridge_perc)])
mt_a = repmat(mt_a, [1, length(ar_coh_bridge_perc)])
mt_a = mt_a

% bridge loan component of borrowing
ar_brdige_a = (ar_coh_bridge_perc'*ar_w_level)'
ar_brdige_a = ar_brdige_a(:)'

% borrowing choices excluding bridge loan
mt_a_nobridge = mt_a - ar_brdige_a

##### SOURCE END #####
--></body></html>