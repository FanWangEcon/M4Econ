
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Cells: List Comprehension with Cells</title><meta name="generator" content="MATLAB 9.6"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2019-09-04"><meta name="DC.source" content="fs_cellfuns.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>Cells: List Comprehension with Cells</h1><!--introduction--><p><b>back to <a href="https://fanwangecon.github.io">Fan</a>'s <a href="https://fanwangecon.github.io/M4Econ/">Reusable Matlab Codes</a> Table of Content.</b></p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Find Index of Elements of String Cells in a larger String Cells</a></li><li><a href="#2">Given Container of Arrays, Find Total Length of All Arrays for Selected Keys</a></li><li><a href="#3">Given Container of Arrays, Find Min and Max of Each and Draw Random N sets</a></li></ul></div><h2 id="1">Find Index of Elements of String Cells in a larger String Cells</h2><p>the function below returns the position of cl_st_param_keys in ls_st_param_key should only include in cl_st_param_keys strings that also exist in ls_st_param_key.</p><pre class="codeinput">ls_st_param_key = {<span class="string">'fl_crra'</span>, <span class="string">'fl_beta'</span>, <span class="keyword">...</span>
                   <span class="string">'fl_w'</span>, <span class="string">'fl_r_save'</span>, <span class="keyword">...</span>
                   <span class="string">'fl_a_max'</span>, <span class="string">'it_z_n'</span>, <span class="string">'it_a_n'</span>};

cl_st_param_keys = {<span class="string">'fl_w'</span>, <span class="string">'fl_beta'</span>, <span class="string">'it_z_n'</span>};

cell2mat(cellfun(@(m) find(strcmp(ls_st_param_key, m)), <span class="keyword">...</span>
                 cl_st_param_keys, <span class="string">'UniformOutput'</span>, false))
</pre><pre class="codeoutput">
ans =

     3     2     6

</pre><h2 id="2">Given Container of Arrays, Find Total Length of All Arrays for Selected Keys</h2><pre class="codeinput">cl_st_param_keys = {<span class="string">'fl_crra'</span>, <span class="string">'fl_beta'</span>};

param_tstar_map = containers.Map(<span class="string">'KeyType'</span>,<span class="string">'char'</span>, <span class="string">'ValueType'</span>,<span class="string">'any'</span>);
it_simu_vec_len = 5;

param_tstar_map(<span class="string">'fl_crra'</span>) = linspace(1, 2, 5);
param_tstar_map(<span class="string">'fl_beta'</span>) = linspace(0.94, 0.98, 10);
param_tstar_map(<span class="string">'w'</span>) = linspace(1.1, 1.4, it_simu_vec_len);
param_tstar_map(<span class="string">'r'</span>) = linspace(0.01, 0.04, it_simu_vec_len);

ar_it_array_len = cell2mat(cellfun(@(m) length(param_tstar_map(m)), <span class="keyword">...</span>
                           cl_st_param_keys, <span class="string">'UniformOutput'</span>, false));

it_total_length = sum(ar_it_array_len);
disp([<span class="string">'ar_it_array_len: '</span> num2str(ar_it_array_len)])
disp([<span class="string">'it_total_length: '</span> num2str(it_total_length)])
</pre><pre class="codeoutput">ar_it_array_len: 5  10
it_total_length: 15
</pre><h2 id="3">Given Container of Arrays, Find Min and Max of Each and Draw Random N sets</h2><pre class="codeinput">cl_st_param_keys = {<span class="string">'fl_crra'</span>, <span class="string">'fl_beta'</span>};

param_tstar_map = containers.Map(<span class="string">'KeyType'</span>,<span class="string">'char'</span>, <span class="string">'ValueType'</span>,<span class="string">'any'</span>);
it_simu_vec_len = 5;

param_tstar_map(<span class="string">'fl_crra'</span>) = linspace(1, 2, 5);
param_tstar_map(<span class="string">'fl_beta'</span>) = linspace(0.94, 0.98, 10);
param_tstar_map(<span class="string">'w'</span>) = linspace(1.1, 1.4, it_simu_vec_len);
param_tstar_map(<span class="string">'r'</span>) = linspace(0.01, 0.04, it_simu_vec_len);

rng(123);
it_simu_length = 20;
mt_param_rand = cell2mat(cellfun(@(m) <span class="keyword">...</span>
                           rand([it_simu_length,1]).*(max(param_tstar_map(m)) - min(param_tstar_map(m))) <span class="keyword">...</span>
                           + min(param_tstar_map(m)), <span class="keyword">...</span>
                           cl_st_param_keys, <span class="string">'UniformOutput'</span>, false));

tb_rand_draws = array2table(mt_param_rand, <span class="string">'VariableNames'</span>, cl_st_param_keys);

disp(tb_rand_draws);
</pre><pre class="codeoutput">    fl_crra    fl_beta
    _______    _______

    1.4262     0.96803
    1.3877     0.97363
    1.5636     0.95468
    1.2568     0.94389
    1.2369     0.95835
    1.9941     0.97991
    1.1906     0.95937
    1.8771     0.96921
    1.0739     0.94154
    1.3472     0.95313
    1.3101     0.97659
    1.1283     0.95613
    1.5423     0.97942
    1.7633     0.94461
    1.8539     0.96575
    1.9343     0.94935
    1.8512     0.96472
    1.4417     0.94432
    1.7394     0.97519
    1.1862     0.97403

</pre><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2019a</a><br></p></div><!--
##### SOURCE BEGIN #####
%% Cells: List Comprehension with Cells
% *back to <https://fanwangecon.github.io Fan>'s
% <https://fanwangecon.github.io/M4Econ/ Reusable Matlab Codes>
% Table of Content.*


%% Find Index of Elements of String Cells in a larger String Cells
% the function below returns the position of cl_st_param_keys in ls_st_param_key
% should only include in cl_st_param_keys strings that also exist in ls_st_param_key.

ls_st_param_key = {'fl_crra', 'fl_beta', ...
                   'fl_w', 'fl_r_save', ...
                   'fl_a_max', 'it_z_n', 'it_a_n'};

cl_st_param_keys = {'fl_w', 'fl_beta', 'it_z_n'};

cell2mat(cellfun(@(m) find(strcmp(ls_st_param_key, m)), ...
                 cl_st_param_keys, 'UniformOutput', false))

%% Given Container of Arrays, Find Total Length of All Arrays for Selected Keys

cl_st_param_keys = {'fl_crra', 'fl_beta'};

param_tstar_map = containers.Map('KeyType','char', 'ValueType','any');
it_simu_vec_len = 5;

param_tstar_map('fl_crra') = linspace(1, 2, 5);
param_tstar_map('fl_beta') = linspace(0.94, 0.98, 10);
param_tstar_map('w') = linspace(1.1, 1.4, it_simu_vec_len);
param_tstar_map('r') = linspace(0.01, 0.04, it_simu_vec_len);

ar_it_array_len = cell2mat(cellfun(@(m) length(param_tstar_map(m)), ...
                           cl_st_param_keys, 'UniformOutput', false));

it_total_length = sum(ar_it_array_len);
disp(['ar_it_array_len: ' num2str(ar_it_array_len)])
disp(['it_total_length: ' num2str(it_total_length)])

%% Given Container of Arrays, Find Min and Max of Each and Draw Random N sets

cl_st_param_keys = {'fl_crra', 'fl_beta'};

param_tstar_map = containers.Map('KeyType','char', 'ValueType','any');
it_simu_vec_len = 5;

param_tstar_map('fl_crra') = linspace(1, 2, 5);
param_tstar_map('fl_beta') = linspace(0.94, 0.98, 10);
param_tstar_map('w') = linspace(1.1, 1.4, it_simu_vec_len);
param_tstar_map('r') = linspace(0.01, 0.04, it_simu_vec_len);

rng(123);
it_simu_length = 20;
mt_param_rand = cell2mat(cellfun(@(m) ...
                           rand([it_simu_length,1]).*(max(param_tstar_map(m)) - min(param_tstar_map(m))) ...
                           + min(param_tstar_map(m)), ...
                           cl_st_param_keys, 'UniformOutput', false));

tb_rand_draws = array2table(mt_param_rand, 'VariableNames', cl_st_param_keys);

disp(tb_rand_draws);

##### SOURCE END #####
--></body></html>